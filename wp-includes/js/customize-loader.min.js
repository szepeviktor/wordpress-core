window.wp=window.wp||{},function(t,e){var i,s=wp.customize;e.extend(e.support,{history:!(!window.history||!history.pushState),hashchange:"onhashchange"in window&&(document.documentMode===undefined||document.documentMode>7)}),i=e.extend({},s.Events,{initialize:function(){this.body=e(document.body),i.settings&&e.support.postMessage&&(e.support.cors||!i.settings.isCrossDomain)&&(this.window=e(window),this.element=e('<div id="customize-container" />').appendTo(this.body),this.bind("open",this.overlay.show),this.bind("close",this.overlay.hide),e("#wpbody").on("click",".load-customize",function(t){t.preventDefault(),i.link=e(this),i.open(i.link.attr("href"))}),e.support.history&&this.window.on("popstate",i.popstate),e.support.hashchange&&(this.window.on("hashchange",i.hashchange),this.window.triggerHandler("hashchange")))},popstate:function(t){var e=t.originalEvent.state;e&&e.customize?i.open(e.customize):i.active&&i.close()},hashchange:function(){var t=window.location.toString().split("#")[1];t&&0===t.indexOf("wp_customize=on")&&i.open(i.settings.url+"?"+t),t||e.support.history||i.close()},beforeunload:function(){if(!i.saved())return i.settings.l10n.saveAlert},open:function(t){if(!this.active){if(i.settings.browser.mobile)return window.location=t;this.originalDocumentTitle=document.title,this.active=!0,this.body.addClass("customize-loading"),this.saved=new s.Value(!0),this.iframe=e("<iframe />",{src:t,title:i.settings.l10n.mainIframeTitle}).appendTo(this.element),this.iframe.one("load",this.loaded),this.messenger=new s.Messenger({url:t,channel:"loader",targetWindow:this.iframe[0].contentWindow}),history.replaceState&&this.messenger.bind("changeset-uuid",function(t){var i=document.createElement("a");i.href=location.href,i.search=e.param(_.extend(s.utils.parseQueryString(i.search.substr(1)),{changeset_uuid:t})),history.replaceState({customize:i.href},"",i.href)}),this.messenger.bind("ready",function(){i.messenger.send("back")}),this.messenger.bind("close",function(){e.support.history?history.back():e.support.hashchange?window.location.hash="":i.close()}),e(window).on("beforeunload",this.beforeunload),this.messenger.bind("saved",function(){i.saved(!0)}),this.messenger.bind("change",function(){i.saved(!1)}),this.messenger.bind("title",function(t){window.document.title=t}),this.pushState(t),this.trigger("open")}},pushState:function(t){var i=t.split("?")[1];e.support.history&&window.location.href!==t?history.pushState({customize:t},"",t):!e.support.history&&e.support.hashchange&&i&&(window.location.hash="wp_customize=on&"+i),this.trigger("open")},opened:function(){i.body.addClass("customize-active full-overlay-active").attr("aria-busy","true")},close:function(){var t,e=this;e.active&&(t=function(i){i?(e.active=!1,e.trigger("close"),e.originalDocumentTitle&&(document.title=e.originalDocumentTitle)):history.forward(),e.messenger.unbind("confirmed-close",t)},e.messenger.bind("confirmed-close",t),i.messenger.send("confirm-close"))},closed:function(){i.iframe.remove(),i.messenger.destroy(),i.iframe=null,i.messenger=null,i.saved=null,i.body.removeClass("customize-active full-overlay-active").removeClass("customize-loading"),e(window).off("beforeunload",i.beforeunload),i.link&&i.link.focus()},loaded:function(){i.body.removeClass("customize-loading").attr("aria-busy","false")},overlay:{show:function(){this.element.fadeIn(200,i.opened)},hide:function(){this.element.fadeOut(200,i.closed)}}}),e(function(){i.settings=_wpCustomizeLoaderSettings,i.initialize()}),s.Loader=i}(wp,jQuery);