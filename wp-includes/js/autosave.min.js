window.autosave=function(){return!0},function(t,e){e.wp=e.wp||{},e.wp.autosave=function(){function i(e){var i,s,r,n=(new Date).getTime(),o=[],d=a();return d&&d.isDirty()&&!d.isHidden()&&n-3e3>h&&(d.save(),h=n),r={post_id:t("#post_ID").val()||0,post_type:t("#post_type").val()||"",post_author:t("#post_author").val()||"",post_title:t("#title").val()||"",content:t("#content").val()||"",excerpt:t("#excerpt").val()||""},"local"===e?r:(t('input[id^="in-category-"]:checked').each(function(){o.push(this.value)}),r.catslist=o.join(","),(i=t("#post_name").val())&&(r.post_name=i),(s=t("#parent_id").val())&&(r.parent_id=s),t("#comment_status").prop("checked")&&(r.comment_status="open"),t("#ping_status").prop("checked")&&(r.ping_status="open"),"1"===t("#auto_draft").val()&&(r.auto_draft="1"),r)}function s(e){return"object"==typeof e?(e.post_title||"")+"::"+(e.content||"")+"::"+(e.excerpt||""):(t("#title").val()||"")+"::"+(t("#content").val()||"")+"::"+(t("#excerpt").val()||"")}function r(){d.trigger("autosave-disable-buttons"),setTimeout(n,5e3)}function n(){d.trigger("autosave-enable-buttons")}function a(){return"undefined"!=typeof tinymce&&tinymce.get("content")}var o,h=0,d=t(document);return d.on("tinymce-editor-init.autosave",function(t,i){"content"===i.id&&e.setTimeout(function(){i.save(),o=s()},1e3)}).ready(function(){o=s()}),{getPostData:i,getCompareString:s,disableButtons:r,enableButtons:n,local:function(){function r(){var t=!1;return w&&v&&(t=sessionStorage.getItem("wp-autosave-"+v),t=t?JSON.parse(t):{}),t}function n(t){var e;return!(!w||!v)&&(e="wp-autosave-"+v,sessionStorage.setItem(e,JSON.stringify(t)),null!==sessionStorage.getItem(e))}function h(){var t=r();return!(!t||!y)&&(t["post_"+y]||!1)}function c(t){var e=r();if(!e||!y)return!1;if(t)e["post_"+y]=t;else{if(!e.hasOwnProperty("post_"+y))return!1;delete e["post_"+y]}return n(e)}function l(){A=!0}function u(){A=!1}function p(e){var r,n,a=!1;return!(A||!w)&&(e?(r=h()||{},t.extend(r,e)):r=i("local"),n=s(r),void 0===x&&(x=o),n!==x&&(r.save_time=(new Date).getTime(),r.status=t("#post_status").val()||"",a=c(r),a&&(x=n),a))}function m(){y=t("#post_ID").val()||0,t("#wp-content-wrap").hasClass("tmce-active")?d.on("tinymce-editor-init.autosave",function(){e.setTimeout(function(){f()},1500)}):f(),b=e.setInterval(p,15e3),t("form#post").on("submit.autosave-local",function(){var i=a(),s=t("#post_ID").val()||0;i&&!i.isHidden()?i.on("submit",function(){p({post_title:t("#title").val()||"",content:t("#content").val()||"",excerpt:t("#excerpt").val()||""})}):p({post_title:t("#title").val()||"",content:t("#content").val()||"",excerpt:t("#excerpt").val()||""});var r="https:"===e.location.protocol;wpCookies.set("wp-saving-post",s+"-check",86400,!1,!1,r)})}function g(t,e){function i(t){return t.toString().replace(/[\x20\t\r\n\f]+/g,"")}return i(t||"")===i(e||"")}function f(){var e,i,s,r,n=h(),a=wpCookies.get("wp-saving-post"),o=t("#has-newer-autosave").parent(".notice"),d=t(".wp-header-end");if(a===y+"-saved")return wpCookies.remove("wp-saving-post"),void c(!1);n&&(e=t("#content").val()||"",i=t("#title").val()||"",s=t("#excerpt").val()||"",g(e,n.content)&&g(i,n.post_title)&&g(s,n.excerpt)||(d.length||(d=t(".wrap h1, .wrap h2").first()),r=t("#local-storage-notice").insertAfter(d).addClass("notice-warning"),o.length?o.slideUp(150,function(){r.slideDown(150)}):r.slideDown(200),r.find(".restore-backup").on("click.autosave-local",function(){_(n),r.fadeTo(250,0,function(){r.slideUp(150)})})))}function _(e){var i;return!!e&&(x=s(e),t("#title").val()!==e.post_title&&t("#title").focus().val(e.post_title||""),t("#excerpt").val(e.excerpt||""),i=a(),i&&!i.isHidden()&&"undefined"!=typeof switchEditors?(i.settings.wpautop&&e.content&&(e.content=switchEditors.wpautop(e.content)),i.undoManager.transact(function(){i.setContent(e.content||""),i.nodeChanged()})):(t("#content-html").click(),t("#content").focus(),document.execCommand("selectAll"),document.execCommand("insertText",!1,e.content||"")),!0)}var v,y,w,b,x,A=!1;return v="undefined"!=typeof e.autosaveL10n&&e.autosaveL10n.blog_id,function(){var t=Math.random().toString(),i=!1;try{e.sessionStorage.setItem("wp-test",t),i=e.sessionStorage.getItem("wp-test")===t,e.sessionStorage.removeItem("wp-test")}catch(s){}return w=i,i}()&&v&&(t("#content").length||t("#excerpt").length)&&d.ready(m),{hasStorage:w,getSavedPostData:h,save:p,suspend:l,resume:u}}(),server:function(){function a(){f=!0,e.clearTimeout(_),_=e.setTimeout(function(){f=!1},1e4)}function h(){b=!0}function c(){b=!1}function l(e){g(),f=!1,y=v,v="",d.trigger("after-autosave",[e]),n(),e.success&&t("#auto_draft").val("")}function u(){w=0,wp.heartbeat.connectNow()}function p(){return s()!==o}function m(){var n,h;return!(b||f||!e.autosave())&&(!((new Date).getTime()<w)&&(n=i(),h=s(n),void 0===y&&(y=o),h!==y&&(v=h,a(),r(),d.trigger("wpcountwords",[n.content]).trigger("before-autosave",[n]),n._wpnonce=t("#_wpnonce").val()||"",n)))}function g(){w=(new Date).getTime()+1e3*autosaveL10n.autosaveInterval||6e4}var f,_,v,y,w=0,b=!1;return d.on("heartbeat-send.autosave",function(t,e){var i=m();i&&(e.wp_autosave=i)}).on("heartbeat-tick.autosave",function(t,e){e.wp_autosave&&l(e.wp_autosave)}).on("heartbeat-connection-lost.autosave",function(e,i,s){if("timeout"===i||603===s){var n=t("#lost-connection-notice");wp.autosave.local.hasStorage||n.find(".hide-if-no-sessionstorage").hide(),n.show(),r()}}).on("heartbeat-connection-restored.autosave",function(){t("#lost-connection-notice").hide(),n()}).ready(function(){g()}),{tempBlockSave:a,triggerSave:u,postChanged:p,suspend:h,resume:c}}()}}()}(jQuery,window);