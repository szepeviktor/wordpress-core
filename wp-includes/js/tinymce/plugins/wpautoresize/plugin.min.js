tinymce.PluginManager.add("wpautoresize",function(t){function e(){return t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen()}function i(t){return parseInt(t,10)||0}function s(r){var n,a,c,l,u,p,m,g,f,_,v,y,w=tinymce.DOM;if(d&&(a=t.getDoc())){if(r=r||{},c=a.body,l=a.documentElement,u=o.autoresize_min_height,!c||r&&"setcontent"===r.type&&r.initial||e())return void(c&&l&&(c.style.overflowY="auto",l.style.overflowY="auto"));m=t.dom.getStyle(c,"margin-top",!0),g=t.dom.getStyle(c,"margin-bottom",!0),f=t.dom.getStyle(c,"padding-top",!0),_=t.dom.getStyle(c,"padding-bottom",!0),v=t.dom.getStyle(c,"border-top-width",!0),y=t.dom.getStyle(c,"border-bottom-width",!0),p=c.offsetHeight+i(m)+i(g)+i(f)+i(_)+i(v)+i(y),p&&p<l.offsetHeight&&(p=l.offsetHeight),(isNaN(p)||p<=0)&&(p=tinymce.Env.ie?c.scrollHeight:tinymce.Env.webkit&&0===c.clientHeight?0:c.offsetHeight),p>o.autoresize_min_height&&(u=p),o.autoresize_max_height&&p>o.autoresize_max_height?(u=o.autoresize_max_height,c.style.overflowY="auto",l.style.overflowY="auto"):(c.style.overflowY="hidden",l.style.overflowY="hidden",c.scrollTop=0),u!==h&&(n=u-h,w.setStyle(t.iframeElement,"height",u+"px"),h=u,tinymce.isWebKit&&n<0&&s(r),t.fire("wp-autoresize",{height:u,deltaHeight:"nodechange"===r.type?n:null}))}}function r(t,e,i){setTimeout(function(){s(),t--?r(t,e,i):i&&i()},e)}function n(){t.dom.hasClass(t.getBody(),"wp-autoresize")||(d=!0,t.dom.addClass(t.getBody(),"wp-autoresize"),t.on("nodechange setcontent keyup FullscreenStateChanged",s),s())}function a(){var e;o.wp_autoresize_on||(d=!1,e=t.getDoc(),t.dom.removeClass(t.getBody(),"wp-autoresize"),t.off("nodechange setcontent keyup FullscreenStateChanged",s),e.body.style.overflowY="auto",e.documentElement.style.overflowY="auto",h=0)}var o=t.settings,h=300,d=!1;t.settings.inline||tinymce.Env.iOS||(o.autoresize_min_height=parseInt(t.getParam("autoresize_min_height",t.getElement().offsetHeight),10),o.autoresize_max_height=parseInt(t.getParam("autoresize_max_height",0),10),o.wp_autoresize_on&&(d=!0,t.on("init",function(){t.dom.addClass(t.getBody(),"wp-autoresize")}),t.on("nodechange keyup FullscreenStateChanged",s),t.on("setcontent",function(){r(3,100)}),t.getParam("autoresize_on_init",!0)&&t.on("init",function(){r(10,200,function(){r(5,1e3)})})),t.on("show",function(){h=0}),t.addCommand("wpAutoResize",s),t.addCommand("wpAutoResizeOn",n),t.addCommand("wpAutoResizeOff",a))});