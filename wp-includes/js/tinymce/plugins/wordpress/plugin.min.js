!function(t){(!t.ui.FloatPanel.zIndex||t.ui.FloatPanel.zIndex<100100)&&(t.ui.FloatPanel.zIndex=100100),t.PluginManager.add("wordpress",function(e){function i(i){var s,n,h,d=0;n="hide"===i,e.theme.panel&&(h=e.theme.panel.find(".toolbar:not(.menubar)")),!h||h.length<2||"hide"===i&&!h[1].visible()||(!i&&h[1].visible()&&(i="hide"),o(h,function(t,e){e>0&&("hide"===i?(t.hide(),d+=30):(t.show(),d-=30))}),d&&!n&&(t.Env.iOS||(s=e.getContentAreaContainer().firstChild,a.setStyle(s,"height",s.clientHeight+d)),"hide"===i?(setUserSetting("hidetb","0"),r&&r.active(!1)):(setUserSetting("hidetb","1"),r&&r.active(!0))),e.fire("wp-toolbar-toggle"))}function s(){}var r,n,a=t.DOM,o=t.each,h=e.editorManager.i18n.translate,d=window.jQuery,c=window.wp,l=c&&c.editor&&c.editor.autop&&e.getParam("wpautop",!0);return d&&d(document).triggerHandler("tinymce-editor-setup",[e]),e.addButton("wp_adv",{tooltip:"Toolbar Toggle",cmd:"WP_Adv",onPostRender:function(){r=this,r.active("1"===getUserSetting("hidetb"))}}),e.on("PostRender",function(){e.getParam("wordpress_adv_hidden",!0)&&"0"===getUserSetting("hidetb","0")&&i("hide")}),e.addCommand("WP_Adv",function(){i()}),e.on("focus",function(){window.wpActiveEditor=e.id}),e.on("BeforeSetContent",function(e){var i;e.content&&(-1!==e.content.indexOf("\x3c!--more")&&(i=h("Read more..."),e.content=e.content.replace(/<!--more(.*?)-->/g,function(e,s){return'<img src="'+t.Env.transparentSrc+'" data-wp-more="more" data-wp-more-text="'+s+'" class="wp-more-tag mce-wp-more" alt="" title="'+i+'" data-mce-resize="false" data-mce-placeholder="1" />'})),-1!==e.content.indexOf("\x3c!--nextpage--\x3e")&&(i=h("Page break"),e.content=e.content.replace(/<!--nextpage-->/g,'<img src="'+t.Env.transparentSrc+'" data-wp-more="nextpage" class="wp-more-tag mce-wp-nextpage" alt="" title="'+i+'" data-mce-resize="false" data-mce-placeholder="1" />')),e.load&&"raw"!==e.format&&(e.content=l?c.editor.autop(e.content):e.content.replace(/-->\s+<!--/g,"--\x3e\x3c!--")),-1===e.content.indexOf("<script")&&-1===e.content.indexOf("<style")||(e.content=e.content.replace(/<(script|style)[^>]*>[\s\S]*?<\/\1>/g,function(e,i){return'<img src="'+t.Env.transparentSrc+'" data-wp-preserve="'+encodeURIComponent(e)+'" data-mce-resize="false" data-mce-placeholder="1" class="mce-object" width="20" height="20" alt="&lt;'+i+'&gt;" title="&lt;'+i+'&gt;" />'})))}),e.on("setcontent",function(){e.$("p").each(function(e,i){if(i.innerHTML&&i.innerHTML.length<10){var s=t.trim(i.innerHTML);s&&"&nbsp;"!==s||(i.innerHTML=t.Env.ie&&t.Env.ie<11?"":'<br data-mce-bogus="1">')}})}),e.on("PostProcess",function(t){t.get&&(t.content=t.content.replace(/<img[^>]+>/g,function(t){var e,i,s="";return-1!==t.indexOf('data-wp-more="more"')?((e=t.match(/data-wp-more-text="([^"]+)"/))&&(s=e[1]),i="\x3c!--more"+s+"--\x3e"):-1!==t.indexOf('data-wp-more="nextpage"')?i="\x3c!--nextpage--\x3e":-1!==t.indexOf("data-wp-preserve")&&(e=t.match(/ data-wp-preserve="([^"]+)"/))&&(i=decodeURIComponent(e[1])),i||t}))}),e.on("ResolveName",function(t){var i;"IMG"===t.target.nodeName&&(i=e.dom.getAttrib(t.target,"data-wp-more"))&&(t.name=i)}),e.addCommand("WP_More",function(i){var s,r,n,a="wp-more-tag",o=e.dom,d=e.selection.getNode(),c=e.getBody();if(i=i||"more",a+=" mce-wp-"+i,n="more"===i?"Read more...":"Next page",n=h(n),r='<img src="'+t.Env.transparentSrc+'" alt="" title="'+n+'" class="'+a+'" data-wp-more="'+i+'" data-mce-resize="false" data-mce-placeholder="1" />',d===c||"P"===d.nodeName&&d.parentNode===c)return void e.insertContent(r);(s=o.getParent(d,function(t){return!(!t.parentNode||t.parentNode!==c)},e.getBody()))&&("P"===s.nodeName?s.appendChild(o.create("p",null,r).firstChild):o.insertAfter(o.create("p",null,r),s),e.nodeChanged())}),e.addCommand("WP_Code",function(){e.formatter.toggle("code")}),e.addCommand("WP_Page",function(){e.execCommand("WP_More","nextpage")}),e.addCommand("WP_Help",function(){function i(t,e){var i="<tr>",s=0;for(e=e||1,o(t,function(t,e){i+="<td><kbd>"+e+"</kbd></td><td>"+h(t)+"</td>",s++});s<e;)i+="<td></td><td></td>",s++;return i+"</tr>"}var s,r,n,a,d=h(t.Env.mac?"Ctrl + Alt + letter:":"Shift + Alt + letter:"),c=h(t.Env.mac?"Cmd + letter:":"Ctrl + letter:"),l=[],u=[],p={},m={},g=0,f=0,_=e.settings.wp_shortcut_labels;_&&(o(_,function(t,e){var s;-1!==t.indexOf("meta")?(g++,(s=t.replace("meta","").toLowerCase())&&(p[s]=e,g%2==0&&(l.push(i(p,2)),p={}))):-1!==t.indexOf("access")&&(f++,(s=t.replace("access","").toLowerCase())&&(m[s]=e,f%2==0&&(u.push(i(m,2)),m={})))}),g%2>0&&l.push(i(p,2)),f%2>0&&u.push(i(m,2)),s=[h("Letter"),h("Action"),h("Letter"),h("Action")],s="<tr><th>"+s.join("</th><th>")+"</th></tr>",r='<div class="wp-editor-help">',r=r+"<h2>"+h("Default shortcuts,")+" "+c+'</h2><table class="wp-help-th-center fixed">'+s+l.join("")+"</table><h2>"+h("Additional shortcuts,")+" "+d+'</h2><table class="wp-help-th-center fixed">'+s+u.join("")+"</table>",e.plugins.wptextpattern&&(!t.Env.ie||t.Env.ie>8)&&(r=r+"<h2>"+h("When starting a new paragraph with one of these formatting shortcuts followed by a space, the formatting will be applied automatically. Press Backspace or Escape to undo.")+'</h2><table class="wp-help-th-center fixed">'+i({"*":"Bullet list","1.":"Numbered list"})+i({"-":"Bullet list","1)":"Numbered list"})+"</table>",r=r+"<h2>"+h("The following formatting shortcuts are replaced when pressing Enter. Press Escape or the Undo button to undo.")+'</h2><table class="wp-help-single">'+i({">":"Blockquote"})+i({"##":"Heading 2"})+i({"###":"Heading 3"})+i({"####":"Heading 4"})+i({"#####":"Heading 5"})+i({"######":"Heading 6"})+i({"---":"Horizontal line"})+"</table>"),r=r+"<h2>"+h("Focus shortcuts:")+'</h2><table class="wp-help-single">'+i({"Alt + F8":"Inline toolbar (when an image, link or preview is selected)"})+i({"Alt + F9":"Editor menu (when enabled)"})+i({"Alt + F10":"Editor toolbar"})+i({"Alt + F11":"Elements path"})+"</table><p>"+h("To move focus to other buttons use Tab or the arrow keys. To return focus to the editor press Escape or use one of the buttons.")+"</p>",r+="</div>",n=e.windowManager.open({title:"Keyboard Shortcuts",items:{type:"container",classes:"wp-help",html:r},buttons:{text:"Close",onclick:"close"}}),n.$el&&(n.$el.find('div[role="application"]').attr("role","document"),a=n.$el.find(".mce-wp-help"),a[0]&&(a.attr("tabindex","0"),a[0].focus(),a.on("keydown",function(t){t.keyCode>=33&&t.keyCode<=40&&t.stopPropagation()}))))}),e.addCommand("WP_Medialib",function(){c&&c.media&&c.media.editor&&c.media.editor.open(e.id)}),e.addButton("wp_more",{tooltip:"Insert Read More tag",onclick:function(){e.execCommand("WP_More","more")}}),e.addButton("wp_page",{tooltip:"Page break",onclick:function(){e.execCommand("WP_More","nextpage")}}),e.addButton("wp_help",{tooltip:"Keyboard Shortcuts",cmd:"WP_Help"}),e.addButton("wp_code",{tooltip:"Code",cmd:"WP_Code",stateSelector:"code"}),c&&c.media&&c.media.editor&&e.addMenuItem("add_media",{text:"Add Media",icon:"wp-media-library",context:"insert",cmd:"WP_Medialib"}),e.addMenuItem("wp_more",{text:"Insert Read More tag",icon:"wp_more",context:"insert",onclick:function(){e.execCommand("WP_More","more")}}),e.addMenuItem("wp_page",{text:"Page break",icon:"wp_page",context:"insert",onclick:function(){e.execCommand("WP_More","nextpage")}}),e.on("BeforeExecCommand",function(i){!t.Env.webkit||"InsertUnorderedList"!==i.command&&"InsertOrderedList"!==i.command||(n||(n=e.dom.create("style",{type:"text/css"},"#tinymce,#tinymce span,#tinymce li,#tinymce li>span,#tinymce p,#tinymce p>span{font:medium sans-serif;color:#000;line-height:normal;}")),e.getDoc().head.appendChild(n))}),e.on("ExecCommand",function(i){t.Env.webkit&&n&&("InsertUnorderedList"===i.command||"InsertOrderedList"===i.command)&&e.dom.remove(n)}),e.on("init",function(){var i=t.Env,s=["mceContentBody"],r=e.getDoc(),n=e.dom;if(i.iOS&&n.addClass(r.documentElement,"ios"),"rtl"===e.getParam("directionality")&&(s.push("rtl"),n.setAttrib(r.documentElement,"dir","rtl")),n.setAttrib(r.documentElement,"lang",e.getParam("wp_lang_attr")),i.ie?9===parseInt(i.ie,10)?s.push("ie9"):8===parseInt(i.ie,10)?s.push("ie8"):i.ie<8&&s.push("ie7"):i.webkit&&s.push("webkit"),s.push("wp-editor"),o(s,function(t){t&&n.addClass(r.body,t)}),e.on("BeforeSetContent",function(t){t.content&&(t.content=t.content.replace(/<p>\s*<(p|div|ul|ol|dl|table|blockquote|h[1-6]|fieldset|pre)( [^>]*)?>/gi,"<$1$2>").replace(/<\/(p|div|ul|ol|dl|table|blockquote|h[1-6]|fieldset|pre)>\s*<\/p>/gi,"</$1>"))}),d&&d(document).triggerHandler("tinymce-editor-init",[e]),window.tinyMCEPreInit&&window.tinyMCEPreInit.dragDropUpload&&n.bind(r,"dragstart dragend dragover drop",function(t){d&&d(document).trigger(new d.Event(t))}),e.getParam("wp_paste_filters",!0)&&(e.on("PastePreProcess",function(e){e.content=e.content.replace(/<br class="?Apple-interchange-newline"?>/gi,""),t.Env.webkit||(e.content=e.content.replace(/(<[^>]+) style="[^"]*"([^>]*>)/gi,"$1$2"),e.content=e.content.replace(/(<[^>]+) data-mce-style=([^>]+>)/gi,"$1 style=$2"))}),e.on("PastePostProcess",function(i){e.$("p",i.node).each(function(t,e){n.isEmpty(e)&&n.remove(e)}),t.isIE&&e.$("a",i.node).find("font, u").each(function(t,e){n.remove(e,!0)})})),e.settings.wp_shortcut_labels&&e.theme.panel){var a={},h="Shift+Alt+",c="Ctrl+";t.Env.mac&&(h="\u2303\u2325",c="\u2318"),o(e.settings.wp_shortcut_labels,function(t,e){a[e]=t.replace("access",h).replace("meta",c)}),o(e.theme.panel.find("button"),function(t){t&&t.settings.tooltip&&a.hasOwnProperty(t.settings.tooltip)&&(t.settings.tooltip=e.translate(t.settings.tooltip)+" ("+a[t.settings.tooltip]+")")}),o(e.theme.panel.find("listbox"),function(t){t&&"Paragraph"===t.settings.text&&o(t.settings.values,function(t){t.text&&a.hasOwnProperty(t.text)&&(t.shortcut="("+a[t.text]+")")})})}}),e.on("SaveContent",function(t){if(!e.inline&&e.isHidden())return void(t.content=t.element.value);t.content=t.content.replace(/<p>(?:<br ?\/?>|\u00a0|\uFEFF| )*<\/p>/g,"<p>&nbsp;</p>"),t.content=l?c.editor.removep(t.content):t.content.replace(/-->\s*<!-- wp:/g,"--\x3e\n\n\x3c!-- wp:")}),e.on("preInit",function(){e.schema.addValidElements("@[id|accesskey|class|dir|lang|style|tabindex|title|contenteditable|draggable|dropzone|hidden|spellcheck|translate],i,b,script[src|async|defer|type|charset|crossorigin|integrity]"),t.Env.iOS&&(e.settings.height=300),o({c:"JustifyCenter",r:"JustifyRight",l:"JustifyLeft",j:"JustifyFull",q:"mceBlockQuote",u:"InsertUnorderedList",o:"InsertOrderedList",m:"WP_Medialib",z:"WP_Adv",t:"WP_More",d:"Strikethrough",h:"WP_Help",p:"WP_Page",x:"WP_Code"},function(t,i){e.shortcuts.add("access+"+i,"",t)}),e.addShortcut("meta+s","",function(){c&&c.autosave&&c.autosave.server.triggerSave()}),window.getUserSetting("editor_plain_text_paste_warning")>1&&(e.settings.paste_plaintext_inform=!1),t.Env.mac&&t.$(e.iframeElement).attr("title",h("Rich Text Area. Press Control-Option-H for help."))}),e.on("PastePlainTextToggle",function(t){if(!0===t.state){var e=parseInt(window.getUserSetting("editor_plain_text_paste_warning"),10)||0;e<2&&window.setUserSetting("editor_plain_text_paste_warning",++e)}}),e.on("preinit",function(){function i(i,s){function r(){if(!n)return this;var e,i,s=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop,o=window.innerWidth,h=window.innerHeight,u=f?f.getBoundingClientRect():{top:0,right:o,bottom:h,left:0,width:o,height:h},p=this.getEl(),m=p.offsetWidth,_=p.clientHeight,v=n.getBoundingClientRect(),y=(v.left+v.right)/2,w=_+5,b=g?g.getBoundingClientRect().bottom:0,x=d?d.getBoundingClientRect().bottom:0,A=c?h-c.getBoundingClientRect().top:0,k=l?h-l.getBoundingClientRect().top:0,D=Math.max(0,b,x,u.top),U=Math.max(0,A,k,h-u.bottom),M=v.top+u.top-D,z=h-u.top-v.bottom-U,O=h-D-U,j="",q=0,S=0;return M>=O||z>=O?(this.scrolling=!0,this.hide(),this.scrolling=!1,this):(t.Env.iOS&&"IMG"===n.nodeName&&(q=54,S=46),this.bottom?z>=w?(j=" mce-arrow-up",e=v.bottom+u.top+r-S):M>=w&&(j=" mce-arrow-down",e=v.top+u.top+r-_+q):M>=w?(j=" mce-arrow-down",e=v.top+u.top+r-_+q):z>=w&&O/2>v.bottom+u.top-D&&(j=" mce-arrow-up",e=v.bottom+u.top+r-S),void 0===e&&(e=r+D+5+S),i=y-m/2+u.left+s,v.left<0||v.right>u.width?i=u.left+s+(u.width-m)/2:m>=o?(j+=" mce-arrow-full",i=0):i<0&&v.left+m>o||i+m>o&&v.right-m<0?i=(o-m)/2:i<u.left+s?(j+=" mce-arrow-left",i=v.left+u.left+s):i+m>u.width+u.left+s&&(j+=" mce-arrow-right",i=v.right-m+u.left+s),t.Env.iOS&&"IMG"===n.nodeName&&(j=j.replace(/ ?mce-arrow-(up|down)/g,"")),p.className=p.className.replace(/ ?mce-arrow-[\w]+/g,"")+j,a.setStyles(p,{left:i,top:e}),this)}var h,m,v=[];return o(i,function(t){function i(){var i=e.selection;"bullist"===s&&i.selectorChanged("ul > li",function(e,i){for(var s,r=i.parents.length;r--&&"OL"!==(s=i.parents[r].nodeName)&&"UL"!=s;);t.active(e&&"UL"===s)}),"numlist"===s&&i.selectorChanged("ol > li",function(e,i){for(var s,r=i.parents.length;r--&&"OL"!==(s=i.parents[r].nodeName)&&"UL"!==s;);t.active(e&&"OL"===s)}),t.settings.stateSelector&&i.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&i.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})}var s;"|"===t?m=null:u.has(t)?(t={type:t},p.toolbar_items_size&&(t.size=p.toolbar_items_size),v.push(t),m=null):(m||(m={type:"buttongroup",items:[]},v.push(m)),e.buttons[t]&&(s=t,t=e.buttons[s],"function"==typeof t&&(t=t()),t.type=t.type||"button",p.toolbar_items_size&&(t.size=p.toolbar_items_size),t=u.create(t),m.items.push(t),e.initialized?i():e.on("init",i)))}),h=u.create({type:"panel",layout:"stack",classes:"toolbar-grp inline-toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:[{type:"toolbar",layout:"flow",items:v}]}),h.bottom=s,h.on("show",function(){this.reposition(),_&&t.$(".mce-widget.mce-tooltip").addClass("wp-hide-mce-tooltip")}),h.on("hide",function(){_&&t.$(".mce-widget.mce-tooltip").removeClass("wp-hide-mce-tooltip")}),h.on("keydown",function(t){27===t.keyCode&&(this.hide(),e.focus())}),e.on("remove",function(){h.remove()}),h.reposition=r,h.hide().renderTo(document.body),h}function s(t){r&&(r.tempHide||"hide"===t.type||"blur"===t.type?(r.hide(),r=!1):"resizewindow"!==t.type&&"scrollwindow"!==t.type&&"resize"!==t.type&&"scroll"!==t.type||r.blockHide||(clearTimeout(h),h=setTimeout(function(){r&&"function"==typeof r.show&&(r.scrolling=!1,r.show())},250),r.scrolling=!0,r.hide()))}var r,n,h,d,c,l,u=t.ui.Factory,p=e.settings,m=e.getContainer(),g=document.getElementById("wpadminbar"),f=document.getElementById(e.id+"_ifr"),_=e.rtl&&/Chrome/.test(navigator.userAgent);m&&(d=t.$(".mce-toolbar-grp",m)[0],c=t.$(".mce-statusbar",m)[0]),"content"===e.id&&(l=document.getElementById("post-status-info")),e.shortcuts.add("alt+119","",function(){var t;r&&(t=r.find("toolbar")[0])&&t.focus(!0)}),e.on("nodechange",function(t){var i=e.selection.isCollapsed(),s={element:t.element,parents:t.parents,collapsed:i};e.fire("wptoolbar",s),n=s.selection||s.element,r&&r!==s.toolbar&&r.hide(),s.toolbar?(r=s.toolbar,r.visible()?r.reposition():r.show()):r=!1}),e.on("focus",function(){r&&r.show()}),e.on("resizewindow scrollwindow",s),e.dom.bind(e.getWin(),"resize scroll",s),e.on("remove",function(){e.off("resizewindow scrollwindow",s),e.dom.unbind(e.getWin(),"resize scroll",s)}),e.on("blur hide",s),e.wp=e.wp||{},e.wp._createToolbar=i},!0),{_showButtons:s,_hideButtons:s,_setEmbed:s,_getEmbed:s}})}(window.tinymce);