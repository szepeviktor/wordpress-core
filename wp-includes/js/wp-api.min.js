!function(t,e){"use strict";function i(){this.models={},this.collections={},this.views={}}t.wp=t.wp||{},wp.api=wp.api||new i,wp.api.versionString=wp.api.versionString||"wp/v2/",!_.isFunction(_.includes)&&_.isFunction(_.contains)&&(_.includes=_.contains)}(window),function(t,e){"use strict";var i,s;t.wp=t.wp||{},wp.api=wp.api||{},wp.api.utils=wp.api.utils||{},wp.api.getModelByRoute=function(t){return _.find(wp.api.models,function(e){return e.prototype.route&&t===e.prototype.route.index})},wp.api.getCollectionByRoute=function(t){return _.find(wp.api.collections,function(e){return e.prototype.route&&t===e.prototype.route.index})},Date.prototype.toISOString||(i=function(t){return s=String(t),1===s.length&&(s="0"+s),s},Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}),wp.api.utils.parseISO8601=function(t){var e,i,s,r,n=0,a=[1,4,5,6,7,10,11];if(i=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(t)){for(s=0;r=a[s];++s)i[r]=+i[r]||0;i[2]=(+i[2]||1)-1,i[3]=+i[3]||1,"Z"!==i[8]&&void 0!==i[9]&&(n=60*i[10]+i[11],"+"===i[9]&&(n=0-n)),e=Date.UTC(i[1],i[2],i[3],i[4],i[5]+n,i[6],i[7])}else e=Date.parse?Date.parse(t):NaN;return e},wp.api.utils.getRootUrl=function(){return t.location.origin?t.location.origin+"/":t.location.protocol+"//"+t.location.host+"/"},wp.api.utils.capitalize=function(t){return _.isUndefined(t)?t:t.charAt(0).toUpperCase()+t.slice(1)},wp.api.utils.capitalizeAndCamelCaseDashes=function(t){return _.isUndefined(t)?t:(t=wp.api.utils.capitalize(t),wp.api.utils.camelCaseDashes(t))},wp.api.utils.camelCaseDashes=function(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})},wp.api.utils.extractRoutePart=function(t,e,i,s){var r;return e=e||1,i=i||wp.api.versionString,0===t.indexOf("/"+i)&&(t=t.substr(i.length+1)),r=t.split("/"),s&&(r=r.reverse()),_.isUndefined(r[--e])?"":r[e]},wp.api.utils.extractParentName=function(t){var e,i=t.lastIndexOf("_id>[\\d]+)/");return i<0?"":(e=t.substr(0,i-1),e=e.split("/"),e.pop(),e=e.pop())},wp.api.utils.decorateFromRoute=function(t,e){_.each(t,function(t){_.includes(t.methods,"POST")||_.includes(t.methods,"PUT")?_.isEmpty(t.args)||(_.isEmpty(e.prototype.args)?e.prototype.args=t.args:e.prototype.args=_.extend(e.prototype.args,t.args)):_.includes(t.methods,"GET")&&(_.isEmpty(t.args)||(_.isEmpty(e.prototype.options)?e.prototype.options=t.args:e.prototype.options=_.extend(e.prototype.options,t.args)))})},wp.api.utils.addMixinsAndHelpers=function(t,e,i){var s=!1,r=["date","modified","date_gmt","modified_gmt"],n={setDate:function(t,e){var i=e||"date";if(_.indexOf(r,i)<0)return!1;this.set(i,t.toISOString())},getDate:function(t){var e=t||"date",i=this.get(e);return!(_.indexOf(r,e)<0||_.isNull(i))&&new Date(wp.api.utils.parseISO8601(i))}},a=function(t,e,i,s,r){var n,a,o,h;return h=jQuery.Deferred(),a=t.get("_embedded")||{},_.isNumber(e)&&0!==e?(a[s]&&(o=_.findWhere(a[s],{id:e})),o||(o={id:e}),n=new wp.api.models[i](o),n.get(r)?h.resolve(n):n.fetch({success:function(t){h.resolve(t)},error:function(t,e){h.reject(e)}}),h.promise()):(h.reject(),h)},o=function(t,e,i,s){var r,n,a,o="",d="",c=jQuery.Deferred();return r=t.get("id"),n=t.get("_embedded")||{},_.isNumber(r)&&0!==r?(_.isUndefined(i)||_.isUndefined(n[i])?o={parent:r}:d=_.isUndefined(s)?n[i]:n[i][s],a=new wp.api.collections[e](d,o),_.isUndefined(a.models[0])?a.fetch({success:function(t){h(t,r),c.resolve(t)},error:function(t,e){c.reject(e)}}):(h(a,r),c.resolve(a)),c.promise()):(c.reject(),c)},h=function(t,e){_.each(t.models,function(t){t.set("parent_post",e)})},d={getMeta:function(t){return this.get("meta")[t]},getMetas:function(){return this.get("meta")},setMetas:function(t){var e=this.get("meta");_.extend(e,t),this.set("meta",e)},setMeta:function(t,e){var i=this.get("meta");i[t]=e,this.set("meta",i)}},c={getRevisions:function(){return o(this,"PostRevisions")}},l={getTags:function(){var t=this.get("tags"),e=new wp.api.collections.Tags;return _.isEmpty(t)?jQuery.Deferred().resolve([]):e.fetch({data:{include:t}})},setTags:function(t){var e,i,s=this,r=[];if(_.isString(t))return!1;_.isArray(t)?(e=new wp.api.collections.Tags,e.fetch({data:{per_page:100},success:function(e){_.each(t,function(t){i=new wp.api.models.Tag(e.findWhere({slug:t})),i.set("parent_post",s.get("id")),r.push(i)}),t=new wp.api.collections.Tags(r),s.setTagsWithCollection(t)}})):this.setTagsWithCollection(t)},setTagsWithCollection:function(t){return this.set("tags",t.pluck("id")),this.save()}},u={getCategories:function(){var t=this.get("categories"),e=new wp.api.collections.Categories;return _.isEmpty(t)?jQuery.Deferred().resolve([]):e.fetch({data:{include:t}})},setCategories:function(t){var e,i,s=this,r=[];if(_.isString(t))return!1;_.isArray(t)?(e=new wp.api.collections.Categories,e.fetch({data:{per_page:100},success:function(e){_.each(t,function(t){i=new wp.api.models.Category(e.findWhere({slug:t})),i.set("parent_post",s.get("id")),r.push(i)}),t=new wp.api.collections.Categories(r),s.setCategoriesWithCollection(t)}})):this.setCategoriesWithCollection(t)},setCategoriesWithCollection:function(t){return this.set("categories",t.pluck("id")),this.save()}},p={getAuthorUser:function(){return a(this,this.get("author"),"User","author","name")}},m={getFeaturedMedia:function(){return a(this,this.get("featured_media"),"Media","wp:featuredmedia","source_url")}};return _.isUndefined(t.prototype.args)?t:(_.each(r,function(e){_.isUndefined(t.prototype.args[e])||(s=!0)}),s&&(t=t.extend(n)),_.isUndefined(t.prototype.args.author)||(t=t.extend(p)),_.isUndefined(t.prototype.args.featured_media)||(t=t.extend(m)),_.isUndefined(t.prototype.args.categories)||(t=t.extend(u)),_.isUndefined(t.prototype.args.meta)||(t=t.extend(d)),_.isUndefined(t.prototype.args.tags)||(t=t.extend(l)),_.isUndefined(i.collections[e+"Revisions"])||(t=t.extend(c)),t)}}(window),function(){"use strict";var t=window.wpApiSettings||{},e=["Comment","Media","Comment","Post","Page","Status","Taxonomy","Type"];wp.api.WPApiBaseModel=Backbone.Model.extend({initialize:function(){-1===_.indexOf(e,this.name)&&(this.requireForceForDelete=!0)},sync:function(t,e,i){var s;return i=i||{},_.isNull(e.get("date_gmt"))&&e.unset("date_gmt"),_.isEmpty(e.get("slug"))&&e.unset("slug"),_.isFunction(e.nonce)&&!_.isEmpty(e.nonce())&&(s=i.beforeSend,i.beforeSend=function(t){if(t.setRequestHeader("X-WP-Nonce",e.nonce()),s)return s.apply(this,arguments)},i.complete=function(t){var i=t.getResponseHeader("X-WP-Nonce");i&&_.isFunction(e.nonce)&&e.nonce()!==i&&e.endpointModel.set("nonce",i)}),this.requireForceForDelete&&"delete"===t&&(e.url=e.url()+"?force=true"),Backbone.sync(t,e,i)},save:function(t,e){return!(!_.includes(this.methods,"PUT")&&!_.includes(this.methods,"POST"))&&Backbone.Model.prototype.save.call(this,t,e)},destroy:function(t){return!!_.includes(this.methods,"DELETE")&&Backbone.Model.prototype.destroy.call(this,t)}}),wp.api.models.Schema=wp.api.WPApiBaseModel.extend({defaults:{_links:{},namespace:null,routes:{}},initialize:function(e,i){var s=this;i=i||{},wp.api.WPApiBaseModel.prototype.initialize.call(s,e,i),s.apiRoot=i.apiRoot||t.root,s.versionString=i.versionString||t.versionString},url:function(){return this.apiRoot+this.versionString}})}(),function(){"use strict";window.wpApiSettings;wp.api.WPApiBaseCollection=Backbone.Collection.extend({initialize:function(t,e){this.state={data:{},currentPage:null,totalPages:null,totalObjects:null},_.isUndefined(e)?this.parent="":this.parent=e.parent},sync:function(t,e,i){var s,r,n=this;return i=i||{},_.isFunction(e.nonce)&&!_.isEmpty(e.nonce())&&(s=i.beforeSend,i.beforeSend=function(t){if(t.setRequestHeader("X-WP-Nonce",e.nonce()),s)return s.apply(n,arguments)},i.complete=function(t){var i=t.getResponseHeader("X-WP-Nonce");i&&_.isFunction(e.nonce)&&e.nonce()!==i&&e.endpointModel.set("nonce",i)}),"read"===t&&(i.data?(n.state.data=_.clone(i.data),delete n.state.data.page):n.state.data=i.data={},"undefined"==typeof i.data.page?(n.state.currentPage=null,n.state.totalPages=null,n.state.totalObjects=null):n.state.currentPage=i.data.page-1,r=i.success,i.success=function(t,e,i){if(_.isUndefined(i)||(n.state.totalPages=parseInt(i.getResponseHeader("x-wp-totalpages"),10),n.state.totalObjects=parseInt(i.getResponseHeader("x-wp-total"),10)),null===n.state.currentPage?n.state.currentPage=1:n.state.currentPage++,r)return r.apply(this,arguments)}),Backbone.sync(t,e,i)},more:function(t){if(t=t||{},t.data=t.data||{},_.extend(t.data,this.state.data),"undefined"==typeof t.data.page){if(!this.hasMore())return!1;null===this.state.currentPage||this.state.currentPage<=1?t.data.page=2:t.data.page=this.state.currentPage+1}return this.fetch(t)},hasMore:function(){return null===this.state.totalPages||null===this.state.totalObjects||null===this.state.currentPage?null:this.state.currentPage<this.state.totalPages}})}(),function(){"use strict";var t,e={},i=window.wpApiSettings||{};window.wp=window.wp||{},wp.api=wp.api||{},_.isEmpty(i)&&(i.root=window.location.origin+"/wp-json/"),t=Backbone.Model.extend({defaults:{apiRoot:i.root,versionString:wp.api.versionString,nonce:null,schema:null,models:{},collections:{}},initialize:function(){var t,e=this;Backbone.Model.prototype.initialize.apply(e,arguments),t=jQuery.Deferred(),e.schemaConstructed=t.promise(),e.schemaModel=new wp.api.models.Schema(null,{apiRoot:e.get("apiRoot"),versionString:e.get("versionString"),nonce:e.get("nonce")}),e.schemaModel.once("change",function(){e.constructFromSchema(),t.resolve(e)}),e.get("schema")?e.schemaModel.set(e.schemaModel.parse(e.get("schema"))):!_.isUndefined(sessionStorage)&&(_.isUndefined(i.cacheSchema)||i.cacheSchema)&&sessionStorage.getItem("wp-api-schema-model"+e.get("apiRoot")+e.get("versionString"))?e.schemaModel.set(e.schemaModel.parse(JSON.parse(sessionStorage.getItem("wp-api-schema-model"+e.get("apiRoot")+e.get("versionString"))))):e.schemaModel.fetch({success:function(t){if(!_.isUndefined(sessionStorage)&&(_.isUndefined(i.cacheSchema)||i.cacheSchema))try{sessionStorage.setItem("wp-api-schema-model"+e.get("apiRoot")+e.get("versionString"),JSON.stringify(t))}catch(s){}},error:function(t){window.console.log(t)}})},constructFromSchema:function(){var t,e,s,r,n=this,a=i.mapping||{models:{Categories:"Category",Comments:"Comment",Pages:"Page",PagesMeta:"PageMeta",PagesRevisions:"PageRevision",Posts:"Post",PostsCategories:"PostCategory",PostsRevisions:"PostRevision",PostsTags:"PostTag",Schema:"Schema",Statuses:"Status",Tags:"Tag",Taxonomies:"Taxonomy",Types:"Type",Users:"User"},collections:{PagesMeta:"PageMeta",PagesRevisions:"PageRevisions",PostsCategories:"PostCategories",PostsMeta:"PostMeta",PostsRevisions:"PostRevisions",PostsTags:"PostTags"}},o=n.get("modelEndpoints"),h=new RegExp("(?:.*[+)]|/("+o.join("|")+"))$");t=[],e=[],s=n.get("apiRoot").replace(wp.api.utils.getRootUrl(),""),r={},r.models={},r.collections={},_.each(n.schemaModel.get("routes"),function(i,r){r!==n.get(" versionString")&&r!==s&&r!=="/"+n.get("versionString").slice(0,-1)&&(h.test(r)?t.push({index:r,route:i}):e.push({index:r,route:i}))}),_.each(t,function(t){var e,i=wp.api.utils.extractRoutePart(t.index,2,n.get("versionString"),!0),s=wp.api.utils.extractRoutePart(t.index,1,n.get("versionString"),!1),o=wp.api.utils.extractRoutePart(t.index,1,n.get("versionString"),!0);s===n.get("versionString")&&(s=""),"me"===o&&(i="me"),""!==s&&s!==i?(e=wp.api.utils.capitalizeAndCamelCaseDashes(s)+wp.api.utils.capitalizeAndCamelCaseDashes(i),e=a.models[e]||e,r.models[e]=wp.api.WPApiBaseModel.extend({url:function(){var t=n.get("apiRoot")+n.get("versionString")+s+"/"+(_.isUndefined(this.get("parent"))||0===this.get("parent")?_.isUndefined(this.get("parent_post"))?"":this.get("parent_post")+"/":this.get("parent")+"/")+i;return _.isUndefined(this.get("id"))||(t+="/"+this.get("id")),t},nonce:function(){return n.get("nonce")},endpointModel:n,route:t,name:e,methods:t.route.methods,endpoints:t.route.endpoints})):(e=wp.api.utils.capitalizeAndCamelCaseDashes(i),e=a.models[e]||e,r.models[e]=wp.api.WPApiBaseModel.extend({url:function(){var t=n.get("apiRoot")+n.get("versionString")+("me"===i?"users/me":i);return _.isUndefined(this.get("id"))||(t+="/"+this.get("id")),t},nonce:function(){return n.get("nonce")},endpointModel:n,route:t,name:e,methods:t.route.methods,endpoints:t.route.endpoints})),wp.api.utils.decorateFromRoute(t.route.endpoints,r.models[e],n.get("versionString"))}),_.each(e,function(t){var e,i,s=t.index.slice(t.index.lastIndexOf("/")+1),o=wp.api.utils.extractRoutePart(t.index,1,n.get("versionString"),!1);""!==o&&o!==s&&n.get("versionString")!==o?(e=wp.api.utils.capitalizeAndCamelCaseDashes(o)+wp.api.utils.capitalizeAndCamelCaseDashes(s),i=a.models[e]||e,e=a.collections[e]||e,r.collections[e]=wp.api.WPApiBaseCollection.extend({url:function(){return n.get("apiRoot")+n.get("versionString")+o+"/"+this.parent+"/"+s},model:function(t,e){return new r.models[i](t,e)},nonce:function(){return n.get("nonce")},endpointModel:n,name:e,route:t,methods:t.route.methods})):(e=wp.api.utils.capitalizeAndCamelCaseDashes(s),i=a.models[e]||e,e=a.collections[e]||e,r.collections[e]=wp.api.WPApiBaseCollection.extend({url:function(){return n.get("apiRoot")+n.get("versionString")+s},model:function(t,e){return new r.models[i](t,e)},nonce:function(){return n.get("nonce")},endpointModel:n,name:e,route:t,methods:t.route.methods})),wp.api.utils.decorateFromRoute(t.route.endpoints,r.collections[e])}),_.each(r.models,function(t,e){r.models[e]=wp.api.utils.addMixinsAndHelpers(t,e,r)}),n.set("models",r.models),n.set("collections",r.collections)}}),wp.api.endpoints=new Backbone.Collection,wp.api.init=function(s){var r,n,a,o={};return s=s||{},o.nonce=_.isString(s.nonce)?s.nonce:i.nonce||"",o.apiRoot=s.apiRoot||i.root||"/wp-json",o.versionString=s.versionString||i.versionString||"wp/v2/",o.schema=s.schema||null,o.modelEndpoints=s.modelEndpoints||["me","settings"],o.schema||o.apiRoot!==i.root||o.versionString!==i.versionString||(o.schema=i.schema),e[o.apiRoot+o.versionString]||(r=wp.api.endpoints.findWhere({apiRoot:o.apiRoot,versionString:o.versionString}),r||(r=new t(o)),n=jQuery.Deferred(),a=n.promise(),r.schemaConstructed.done(function(t){wp.api.endpoints.add(t),wp.api.models=_.extend(wp.api.models,t.get("models")),wp.api.collections=_.extend(wp.api.collections,t.get("collections")),n.resolve(t)}),e[o.apiRoot+o.versionString]=a),e[o.apiRoot+o.versionString]},wp.api.loadPromise=wp.api.init()}();