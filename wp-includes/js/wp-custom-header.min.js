!function(t,e){function i(e,i){var s;"function"==typeof t.Event?s=new Event(i):(s=document.createEvent("Event"),s.initEvent(i,!0,!0)),e.dispatchEvent(s)}function s(){this.handlers={nativeVideo:new n,youtube:new a}}function r(){}var n,a;t.wp=t.wp||{},"addEventListener"in t&&(s.prototype={initialize:function(){if(this.supportsVideo())for(var t in this.handlers){var s=this.handlers[t];if("test"in s&&s.test(e)){this.activeHandler=s.initialize.call(s,e),i(document,"wp-custom-header-video-loaded");break}}},supportsVideo:function(){return!(t.innerWidth<e.minWidth||t.innerHeight<e.minHeight)},BaseVideoHandler:r},r.prototype={initialize:function(e){var i=this,s=document.createElement("button");this.settings=e,this.container=document.getElementById("wp-custom-header"),this.button=s,s.setAttribute("type","button"),s.setAttribute("id","wp-custom-header-video-button"),s.setAttribute("class","wp-custom-header-video-button wp-custom-header-video-play"),s.innerHTML=e.l10n.play,s.addEventListener("click",function(){i.isPaused()?i.play():i.pause()}),this.container.addEventListener("play",function(){s.className="wp-custom-header-video-button wp-custom-header-video-play",s.innerHTML=e.l10n.pause,"a11y"in t.wp&&t.wp.a11y.speak(e.l10n.playSpeak)}),this.container.addEventListener("pause",function(){s.className="wp-custom-header-video-button wp-custom-header-video-pause",s.innerHTML=e.l10n.play,"a11y"in t.wp&&t.wp.a11y.speak(e.l10n.pauseSpeak)}),this.ready()},ready:function(){},isPaused:function(){},pause:function(){},play:function(){},setVideo:function(t){var e,i=this.container.getElementsByClassName("customize-partial-edit-shortcut");i.length&&(e=this.container.removeChild(i[0])),this.container.innerHTML="",this.container.appendChild(t),e&&this.container.appendChild(e)},showControls:function(){this.container.contains(this.button)||this.container.appendChild(this.button)},test:function(){return!1},trigger:function(t){i(this.container,t)}},r.extend=function(t){function e(){return r.apply(this,arguments)}var i;e.prototype=Object.create(r.prototype),e.prototype.constructor=e;for(i in t)e.prototype[i]=t[i];return e},n=r.extend({test:function(t){return document.createElement("video").canPlayType(t.mimeType)},ready:function(){var t=this,e=document.createElement("video");e.id="wp-custom-header-video",e.autoplay="autoplay",e.loop="loop",e.muted="muted",e.width=this.settings.width,e.height=this.settings.height,e.addEventListener("play",function(){t.trigger("play")}),e.addEventListener("pause",function(){t.trigger("pause")}),e.addEventListener("canplay",function(){t.showControls()}),this.video=e,t.setVideo(e),e.src=this.settings.videoUrl},isPaused:function(){return this.video.paused},pause:function(){this.video.pause()},play:function(){this.video.play()}}),a=r.extend({test:function(t){return"video/x-youtube"===t.mimeType},ready:function(){var e=this;if("YT"in t)YT.ready(e.loadVideo.bind(e));else{var i=document.createElement("script");i.src="https://www.youtube.com/iframe_api",i.onload=function(){YT.ready(e.loadVideo.bind(e))},document.getElementsByTagName("head")[0].appendChild(i)}},loadVideo:function(){var t=this,e=document.createElement("div"),i=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/;e.id="wp-custom-header-video",t.setVideo(e),t.player=new YT.Player(e,{height:this.settings.height,width:this.settings.width,videoId:this.settings.videoUrl.match(i)[1],events:{onReady:function(e){e.target.mute(),t.showControls()},onStateChange:function(e){YT.PlayerState.PLAYING===e.data?t.trigger("play"):YT.PlayerState.PAUSED===e.data?t.trigger("pause"):YT.PlayerState.ENDED===e.data&&e.target.playVideo()}},playerVars:{autoplay:1,controls:0,disablekb:1,fs:0,iv_load_policy:3,loop:1,modestbranding:1,playsinline:1,rel:0,showinfo:0}})},isPaused:function(){return YT.PlayerState.PAUSED===this.player.getPlayerState()},pause:function(){this.player.pauseVideo()},play:function(){this.player.playVideo()}}),t.wp.customHeader=new s,document.addEventListener("DOMContentLoaded",t.wp.customHeader.initialize.bind(t.wp.customHeader),!1),"customize"in t.wp&&(t.wp.customize.selectiveRefresh.bind("render-partials-response",function(t){"custom_header_settings"in t&&(e=t.custom_header_settings)}),t.wp.customize.selectiveRefresh.bind("partial-content-rendered",function(e){"custom_header"===e.partial.id&&t.wp.customHeader.initialize()})))}(window,window._wpCustomHeaderSettings||{});