!function(t){function e(s){if(i[s])return i[s].exports;var r=i[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){var s=wp.media,r=window._wpmejsSettings||{},n=window._wpMediaViewsL10n||{};wp.media.mixin={mejsSettings:r,removeAllPlayers:function(){var t;if(window.mejs&&window.mejs.players)for(t in window.mejs.players)window.mejs.players[t].pause(),this.removePlayer(window.mejs.players[t])},removePlayer:function(t){var e,i;if(t.options){for(e in t.options.features)if(i=t.options.features[e],t["clean"+i])try{t["clean"+i](t)}catch(s){}t.isDynamic||t.node.remove(),"html5"!==t.media.rendererName&&t.media.remove(),delete window.mejs.players[t.id],t.container.remove(),t.globalUnbind("resize",t.globalResizeCallback),t.globalUnbind("keydown",t.globalKeydownCallback),t.globalUnbind("click",t.globalClickCallback),delete t.media.player}},unsetPlayers:function(){this.players&&this.players.length&&(_.each(this.players,function(t){t.pause(),wp.media.mixin.removePlayer(t)}),this.players=[])}},wp.media.playlist=new wp.media.collection({tag:"playlist",editTitle:n.editPlaylistTitle,defaults:{id:wp.media.view.settings.post.id,style:"light",tracklist:!0,tracknumbers:!0,images:!0,artists:!0,type:"audio"}}),wp.media.audio={coerce:wp.media.coerce,defaults:{id:wp.media.view.settings.post.id,src:"",loop:!1,autoplay:!1,preload:"none",width:400},edit:function(t){var e=wp.shortcode.next("audio",t).shortcode;return wp.media({frame:"audio",state:"audio-details",metadata:_.defaults(e.attrs.named,this.defaults)})},shortcode:function(t){var e;return _.each(this.defaults,function(e,i){t[i]=this.coerce(t,i),e===t[i]&&delete t[i]},this),e=t.content,delete t.content,new wp.shortcode({tag:"audio",attrs:t,content:e})}},wp.media.video={coerce:wp.media.coerce,defaults:{id:wp.media.view.settings.post.id,src:"",poster:"",loop:!1,autoplay:!1,preload:"metadata",content:"",width:640,height:360},edit:function(t){var e,i=wp.shortcode.next("video",t).shortcode;return e=i.attrs.named,e.content=i.content,wp.media({frame:"video",state:"video-details",metadata:_.defaults(e,this.defaults)})},shortcode:function(t){var e;return _.each(this.defaults,function(e,i){t[i]=this.coerce(t,i),e===t[i]&&delete t[i]},this),e=t.content,delete t.content,new wp.shortcode({tag:"video",attrs:t,content:e})}},s.model.PostMedia=i(2),s.controller.AudioDetails=i(3),s.controller.VideoDetails=i(4),s.view.MediaFrame.MediaDetails=i(5),s.view.MediaFrame.AudioDetails=i(6),s.view.MediaFrame.VideoDetails=i(7),s.view.MediaDetails=i(8),s.view.AudioDetails=i(9),s.view.VideoDetails=i(10)},function(t,e){var i=Backbone.Model.extend({initialize:function(){this.attachment=!1},setSource:function(t){this.attachment=t,this.extension=t.get("filename").split(".").pop(),this.get("src")&&this.extension===this.get("src").split(".").pop()&&this.unset("src"),_.contains(wp.media.view.settings.embedExts,this.extension)?this.set(this.extension,this.attachment.get("url")):this.unset(this.extension)},changeAttachment:function(t){this.setSource(t),this.unset("src"),_.each(_.without(wp.media.view.settings.embedExts,this.extension),function(t){this.unset(t)},this)}});t.exports=i},function(t,e){var i,s=wp.media.controller.State,r=wp.media.view.l10n;i=s.extend({defaults:{id:"audio-details",toolbar:"audio-details",title:r.audioDetailsTitle,content:"audio-details",menu:"audio-details",router:!1,priority:60},initialize:function(t){this.media=t.media,s.prototype.initialize.apply(this,arguments)}}),t.exports=i},function(t,e){var i,s=wp.media.controller.State,r=wp.media.view.l10n;i=s.extend({defaults:{id:"video-details",toolbar:"video-details",title:r.videoDetailsTitle,content:"video-details",menu:"video-details",router:!1,priority:60},initialize:function(t){this.media=t.media,s.prototype.initialize.apply(this,arguments)}}),t.exports=i},function(t,e){var i,s=wp.media.view.MediaFrame.Select,r=wp.media.view.l10n;i=s.extend({defaults:{id:"media",url:"",menu:"media-details",content:"media-details",toolbar:"media-details",type:"link",priority:120},initialize:function(t){this.DetailsView=t.DetailsView,this.cancelText=t.cancelText,this.addText=t.addText,this.media=new wp.media.model.PostMedia(t.metadata),this.options.selection=new wp.media.model.Selection(this.media.attachment,{multiple:!1}),s.prototype.initialize.apply(this,arguments)},bindHandlers:function(){var t=this.defaults.menu;s.prototype.bindHandlers.apply(this,arguments),this.on("menu:create:"+t,this.createMenu,this),this.on("content:render:"+t,this.renderDetailsContent,this),this.on("menu:render:"+t,this.renderMenu,this),this.on("toolbar:render:"+t,this.renderDetailsToolbar,this)},renderDetailsContent:function(){var t=new this.DetailsView({controller:this,model:this.state().media,attachment:this.state().media.attachment}).render();this.content.set(t)},renderMenu:function(t){var e=this.lastState(),i=e&&e.id,s=this;t.set({cancel:{text:this.cancelText,priority:20,click:function(){i?s.setState(i):s.close()}},separateCancel:new wp.media.View({className:"separator",priority:40})})},setPrimaryButton:function(t,e){this.toolbar.set(new wp.media.view.Toolbar({controller:this,items:{button:{style:"primary",text:t,priority:80,click:function(){var t=this.controller;e.call(this,t,t.state()),t.setState(t.options.state),t.reset()}}}}))},renderDetailsToolbar:function(){this.setPrimaryButton(r.update,function(t,e){t.close(),e.trigger("update",t.media.toJSON())})},renderReplaceToolbar:function(){this.setPrimaryButton(r.replace,function(t,e){var i=e.get("selection").single();t.media.changeAttachment(i),e.trigger("replace",t.media.toJSON())})},renderAddSourceToolbar:function(){this.setPrimaryButton(this.addText,function(t,e){var i=e.get("selection").single();t.media.setSource(i),e.trigger("add-source",t.media.toJSON())})}}),t.exports=i},function(t,e){var i,s=wp.media.view.MediaFrame.MediaDetails,r=wp.media.controller.MediaLibrary,n=wp.media.view.l10n;i=s.extend({defaults:{id:"audio",url:"",menu:"audio-details",content:"audio-details",toolbar:"audio-details",type:"link",title:n.audioDetailsTitle,priority:120},initialize:function(t){t.DetailsView=wp.media.view.AudioDetails,t.cancelText=n.audioDetailsCancel,t.addText=n.audioAddSourceTitle,s.prototype.initialize.call(this,t)},bindHandlers:function(){s.prototype.bindHandlers.apply(this,arguments),this.on("toolbar:render:replace-audio",this.renderReplaceToolbar,this),this.on("toolbar:render:add-audio-source",this.renderAddSourceToolbar,this)},createStates:function(){this.states.add([new wp.media.controller.AudioDetails({media:this.media}),new r({type:"audio",id:"replace-audio",title:n.audioReplaceTitle,toolbar:"replace-audio",media:this.media,menu:"audio-details"}),new r({type:"audio",id:"add-audio-source",title:n.audioAddSourceTitle,toolbar:"add-audio-source",media:this.media,menu:!1})])}}),t.exports=i},function(t,e){var i,s=wp.media.view.MediaFrame.MediaDetails,r=wp.media.controller.MediaLibrary,n=wp.media.view.l10n;i=s.extend({defaults:{id:"video",url:"",menu:"video-details",content:"video-details",toolbar:"video-details",type:"link",title:n.videoDetailsTitle,priority:120},initialize:function(t){t.DetailsView=wp.media.view.VideoDetails,t.cancelText=n.videoDetailsCancel,t.addText=n.videoAddSourceTitle,s.prototype.initialize.call(this,t)},bindHandlers:function(){s.prototype.bindHandlers.apply(this,arguments),this.on("toolbar:render:replace-video",this.renderReplaceToolbar,this),this.on("toolbar:render:add-video-source",this.renderAddSourceToolbar,this),this.on("toolbar:render:select-poster-image",this.renderSelectPosterImageToolbar,this),this.on("toolbar:render:add-track",this.renderAddTrackToolbar,this)},createStates:function(){this.states.add([new wp.media.controller.VideoDetails({media:this.media}),new r({type:"video",id:"replace-video",title:n.videoReplaceTitle,toolbar:"replace-video",media:this.media,menu:"video-details"}),new r({type:"video",id:"add-video-source",title:n.videoAddSourceTitle,toolbar:"add-video-source",media:this.media,menu:!1}),new r({type:"image",id:"select-poster-image",title:n.videoSelectPosterImageTitle,toolbar:"select-poster-image",media:this.media,menu:"video-details"}),new r({type:"text",id:"add-track",title:n.videoAddTrackTitle,toolbar:"add-track",media:this.media,menu:"video-details"})])},renderSelectPosterImageToolbar:function(){this.setPrimaryButton(n.videoSelectPosterImageTitle,function(t,e){var i=[],s=e.get("selection").single();t.media.set("poster",s.get("url")),e.trigger("set-poster-image",t.media.toJSON()),_.each(wp.media.view.settings.embedExts,function(e){t.media.get(e)&&i.push(t.media.get(e))}),wp.ajax.send("set-attachment-thumbnail",{data:{urls:i,thumbnail_id:s.get("id")}})})},renderAddTrackToolbar:function(){this.setPrimaryButton(n.videoAddTrackTitle,function(t,e){var i=e.get("selection").single(),s=t.media.get("content");-1===s.indexOf(i.get("url"))&&(s+=['<track srclang="en" label="English" kind="subtitles" src="',i.get("url"),'" />'].join(""),t.media.set("content",s)),e.trigger("add-track",t.media.toJSON())})}}),t.exports=i},function(t,e){var i,s=wp.media.view.Settings.AttachmentDisplay,r=jQuery;i=s.extend({initialize:function(){_.bindAll(this,"success"),this.players=[],this.listenTo(this.controller,"close",wp.media.mixin.unsetPlayers),this.on("ready",this.setPlayer),this.on("media:setting:remove",wp.media.mixin.unsetPlayers,this),this.on("media:setting:remove",this.render),this.on("media:setting:remove",this.setPlayer),s.prototype.initialize.apply(this,arguments)},events:function(){return _.extend({"click .remove-setting":"removeSetting","change .content-track":"setTracks","click .remove-track":"setTracks","click .add-media-source":"addSource"},s.prototype.events)},prepare:function(){return _.defaults({model:this.model.toJSON()},this.options)},removeSetting:function(t){var e,i=r(t.currentTarget).parent();e=i.find("input").data("setting"),e&&(this.model.unset(e),this.trigger("media:setting:remove",this)),i.remove()},setTracks:function(){var t="";_.each(this.$(".content-track"),function(e){t+=r(e).val()}),this.model.set("content",t),this.trigger("media:setting:remove",this)},addSource:function(t){this.controller.lastMime=r(t.currentTarget).data("mime"),this.controller.setState("add-"+this.controller.defaults.id+"-source")},loadPlayer:function(){this.players.push(new MediaElementPlayer(this.media,this.settings)),this.scriptXhr=!1},setPlayer:function(){var t;this.players.length||!this.media||this.scriptXhr||(t=this.model.get("src"),t&&t.indexOf("vimeo")>-1&&!("Vimeo"in window)?this.scriptXhr=r.getScript("https://player.vimeo.com/api/player.js",_.bind(this.loadPlayer,this)):this.loadPlayer())},setMedia:function(){return this},success:function(t){var e=t.attributes.autoplay&&"false"!==t.attributes.autoplay;"flash"===t.pluginType&&e&&t.addEventListener("canplay",function(){t.play()},!1),this.mejs=t},render:function(){return s.prototype.render.apply(this,arguments),setTimeout(_.bind(function(){this.resetFocus()},this),10),this.settings=_.defaults({success:this.success},wp.media.mixin.mejsSettings),this.setMedia()},resetFocus:function(){this.$(".embed-media-settings").scrollTop(0)}},{instances:0,prepareSrc:function(t){var e=i.instances++;return _.each(r(t).find("source"),function(t){t.src=[t.src,t.src.indexOf("?")>-1?"&":"?","_=",e].join("")}),t}}),t.exports=i},function(t,e){var i,s=wp.media.view.MediaDetails;i=s.extend({className:"audio-details",template:wp.template("audio-details"),setMedia:function(){var t=this.$(".wp-audio-shortcode");return t.find("source").length?(t.is(":hidden")&&t.show(),this.media=s.prepareSrc(t.get(0))):(t.hide(),this.media=!1),this}}),t.exports=i},function(t,e){var i,s=wp.media.view.MediaDetails;i=s.extend({className:"video-details",template:wp.template("video-details"),setMedia:function(){var t=this.$(".wp-video-shortcode");return t.find("source").length?(t.is(":hidden")&&t.show(),t.hasClass("youtube-video")||t.hasClass("vimeo-video")?this.media=t.get(0):this.media=s.prepareSrc(t.get(0))):(t.hide(),this.media=!1),this}}),t.exports=i}]);