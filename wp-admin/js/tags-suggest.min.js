!function(t){function e(t){return t.split(new RegExp(s+"\\s*"))}function i(t){return e(t).pop()}if("undefined"!=typeof window.tagsSuggestL10n&&"undefined"!=typeof window.uiAutocompleteL10n){var s=window.tagsSuggestL10n.tagDelimiter||",";t.fn.wpTagsSuggest=function(r){var n,a,o=t(this);r=r||{};var h=r.taxonomy||o.attr("data-wp-taxonomy")||"post_tag";return delete r.taxonomy,r=t.extend({source:function(e,s){var r;if(a===e.term)return void s(n);r=i(e.term),t.get(window.tagsSuggestL10n.restURL,{_fields:["id","name"],taxonomy:h,search:r}).always(function(){o.removeClass("ui-autocomplete-loading")}).done(function(t){n=t,s(t)}),a=e.term},focus:function(t,e){o.attr("aria-activedescendant","wp-tags-autocomplete-"+e.item.id),t.preventDefault()},select:function(i,r){var n=e(o.val());return n.pop(),n.push(r.item.name,""),o.val(n.join(s+" ")),t.ui.keyCode.TAB===i.keyCode?(window.wp.a11y.speak(window.tagsSuggestL10n.termSelected,"assertive"),i.preventDefault()):t.ui.keyCode.ENTER===i.keyCode&&(i.preventDefault(),i.stopPropagation()),!1},open:function(){o.attr("aria-expanded","true")},close:function(){o.attr("aria-expanded","false")},minLength:window.tagsSuggestL10n.minChars,position:{my:"left top+2",at:"left bottom",collision:"none"},messages:{noResults:window.uiAutocompleteL10n.noResults,results:function(t){return t>1?window.uiAutocompleteL10n.manyResults.replace("%d",t):window.uiAutocompleteL10n.oneResult}}},r),o.on("keydown",function(){o.removeAttr("aria-activedescendant")}).autocomplete(r).autocomplete("instance")._renderItem=function(e,i){return t('<li role="option" id="wp-tags-autocomplete-'+i.id+'">').text(i.name).appendTo(e)},o.attr({role:"combobox","aria-autocomplete":"list","aria-expanded":"false","aria-owns":o.autocomplete("widget").attr("id")}).on("focus",function(){e(o.val()).pop()&&o.autocomplete("search")}).autocomplete("widget").addClass("wp-tags-autocomplete").attr("role","listbox").removeAttr("tabindex").on("menufocus",function(t,e){e.item.attr("aria-selected","true")}).on("menublur",function(){t(this).find('[aria-selected="true"]').removeAttr("aria-selected")}),this}}}(jQuery);