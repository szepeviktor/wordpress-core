window.wp=window.wp||{},function(t,e){window.inlineEditPost={init:function(){var e=this,i=t("#inline-edit"),s=t("#bulk-edit");e.type=t("table.widefat").hasClass("pages")?"page":"post",e.what="#post-",i.keyup(function(t){if(27===t.which)return inlineEditPost.revert()}),s.keyup(function(t){if(27===t.which)return inlineEditPost.revert()}),t(".cancel",i).click(function(){return inlineEditPost.revert()}),t(".save",i).click(function(){return inlineEditPost.save(this)}),t("td",i).keydown(function(e){if(13===e.which&&!t(e.target).hasClass("cancel"))return inlineEditPost.save(this)}),t(".cancel",s).click(function(){return inlineEditPost.revert()}),t('#inline-edit .inline-edit-private input[value="private"]').click(function(){var e=t("input.inline-edit-password-input");t(this).prop("checked")?e.val("").prop("disabled",!0):e.prop("disabled",!1)}),t("#the-list").on("click",".editinline",function(){t(this).attr("aria-expanded","true"),inlineEditPost.edit(this)}),t("#bulk-edit").find("fieldset:first").after(t("#inline-edit fieldset.inline-edit-categories").clone()).siblings("fieldset:last").prepend(t("#inline-edit label.inline-edit-tags").clone()),t('select[name="_status"] option[value="future"]',s).remove(),t("#doaction, #doaction2").click(function(i){var s;e.whichBulkButtonId=t(this).attr("id"),s=e.whichBulkButtonId.substr(2),"edit"===t('select[name="'+s+'"]').val()?(i.preventDefault(),e.setBulk()):t("form#posts-filter tr.inline-editor").length>0&&e.revert()})},toggle:function(e){var i=this;"none"===t(i.what+i.getId(e)).css("display")?i.revert():i.edit(e)},setBulk:function(){var e="",i=this.type,s=!0;if(this.revert(),t("#bulk-edit td").attr("colspan",t("th:visible, td:visible",".widefat:first thead").length),t("table.widefat tbody").prepend(t("#bulk-edit")).prepend('<tr class="hidden"></tr>'),t("#bulk-edit").addClass("inline-editor").show(),t('tbody th.check-column input[type="checkbox"]').each(function(){if(t(this).prop("checked")){s=!1;var i,r=t(this).val();i=t("#inline_"+r+" .post_title").html()||inlineEditL10n.notitle,e+='<div id="ttle'+r+'"><a id="_'+r+'" class="ntdelbutton" title="'+inlineEditL10n.ntdeltitle+'">X</a>'+i+"</div>"}}),s)return this.revert();t("#bulk-titles").html(e),t("#bulk-titles a").click(function(){var e=t(this).attr("id").substr(1);t('table.widefat input[value="'+e+'"]').prop("checked",!1),t("#ttle"+e).remove()}),"post"===i&&t("tr.inline-editor textarea[data-wp-taxonomy]").each(function(e,i){t(i).autocomplete("instance")||t(i).wpTagsSuggest()}),t("html, body").animate({scrollTop:0},"fast")},edit:function(e){var i,s,r,n,a,o,h,d,c,l,u,p=this,m=!0;for(p.revert(),"object"==typeof e&&(e=p.getId(e)),i=["post_title","post_name","post_author","_status","jj","mm","aa","hh","mn","ss","post_password","post_format","menu_order","page_template"],"page"===p.type&&i.push("post_parent"),s=t("#inline-edit").clone(!0),t("td",s).attr("colspan",t("th:visible, td:visible",".widefat:first thead").length),t(p.what+e).removeClass("is-expanded").hide().after(s).after('<tr class="hidden"></tr>'),r=t("#inline_"+e),t(':input[name="post_author"] option[value="'+t(".post_author",r).text()+'"]',s).val()||t(':input[name="post_author"]',s).prepend('<option value="'+t(".post_author",r).text()+'">'+t("#"+p.type+"-"+e+" .author").text()+"</option>"),1===t(':input[name="post_author"] option',s).length&&t("label.inline-edit-author",s).hide(),c=0;c<i.length;c++)l=t("."+i[c],r),l.find("img").replaceWith(function(){return this.alt}),l=l.text(),t(':input[name="'+i[c]+'"]',s).val(l);if("open"===t(".comment_status",r).text()&&t('input[name="comment_status"]',s).prop("checked",!0),"open"===t(".ping_status",r).text()&&t('input[name="ping_status"]',s).prop("checked",!0),"sticky"===t(".sticky",r).text()&&t('input[name="sticky"]',s).prop("checked",!0),t(".post_category",r).each(function(){var i,r=t(this).text();r&&(i=t(this).attr("id").replace("_"+e,""),t("ul."+i+"-checklist :checkbox",s).val(r.split(",")))}),t(".tags_input",r).each(function(){var i=t(this),r=t(this).attr("id").replace("_"+e,""),n=t("textarea.tax_input_"+r,s),a=inlineEditL10n.comma;i.find("img").replaceWith(function(){return this.alt}),i=i.text(),i&&(","!==a&&(i=i.replace(/,/g,a)),n.val(i)),n.wpTagsSuggest()}),n=t("._status",r).text(),"future"!==n&&t('select[name="_status"] option[value="future"]',s).remove(),u=t(".inline-edit-password-input").prop("disabled",!1),"private"===n&&(t('input[name="keep_private"]',s).prop("checked",!0),u.val("").prop("disabled",!0)),a=t('select[name="post_parent"] option[value="'+e+'"]',s),a.length>0){for(o=a[0].className.split("-")[1],h=a;m&&(h=h.next("option"),0!==h.length);)d=h[0].className.split("-")[1],d<=o?m=!1:(h.remove(),h=a);a.remove()}return t(s).attr("id","edit-"+e).addClass("inline-editor").show(),t(".ptitle",s).focus(),!1},save:function(i){var s,r,n=t(".post_status_page").val()||"";return"object"==typeof i&&(i=this.getId(i)),t("table.widefat .spinner").addClass("is-active"),s={action:"inline-save",post_type:typenow,post_ID:i,edit_date:"true",post_status:n},r=t("#edit-"+i).find(":input").serialize(),s=r+"&"+t.param(s),t.post(ajaxurl,s,function(s){var r=t("#edit-"+i+" .inline-edit-save .notice-error"),n=r.find(".error");t("table.widefat .spinner").removeClass("is-active"),t(".ac_results").hide(),s?-1!==s.indexOf("<tr")?(t(inlineEditPost.what+i).siblings("tr.hidden").addBack().remove(),t("#edit-"+i).before(s).remove(),t(inlineEditPost.what+i).hide().fadeIn(400,function(){t(this).find(".editinline").attr("aria-expanded","false").focus(),e.a11y.speak(inlineEditL10n.saved)})):(s=s.replace(/<.[^<>]*?>/g,""),r.removeClass("hidden"),n.html(s),e.a11y.speak(n.text())):(r.removeClass("hidden"),n.html(inlineEditL10n.error),e.a11y.speak(inlineEditL10n.error))},"html"),!1},revert:function(){var e=t(".widefat"),i=t(".inline-editor",e).attr("id");return i&&(t(".spinner",e).removeClass("is-active"),t(".ac_results").hide(),"bulk-edit"===i?(t("#bulk-edit",e).removeClass("inline-editor").hide().siblings(".hidden").remove(),t("#bulk-titles").empty(),t("#inlineedit").append(t("#bulk-edit")),t("#"+inlineEditPost.whichBulkButtonId).focus()):(t("#"+i).siblings("tr.hidden").addBack().remove(),i=i.substr(i.lastIndexOf("-")+1),t(this.what+i).show().find(".editinline").attr("aria-expanded","false").focus())),!1},getId:function(e){var i=t(e).closest("tr").attr("id"),s=i.split("-");return s[s.length-1]}},t(document).ready(function(){inlineEditPost.init()}),t(document).on("heartbeat-tick.wp-check-locked-posts",function(e,i){var s=i["wp-check-locked-posts"]||{};t("#the-list tr").each(function(e,i){var r,n,a=i.id,o=t(i);s.hasOwnProperty(a)?o.hasClass("wp-locked")||(r=s[a],o.find(".column-title .locked-text").text(r.text),o.find(".check-column checkbox").prop("checked",!1),r.avatar_src&&(n=t('<img class="avatar avatar-18 photo" width="18" height="18" alt="" />').attr("src",r.avatar_src.replace(/&amp;/g,"&")),o.find(".column-title .locked-avatar").empty().append(n)),o.addClass("wp-locked")):o.hasClass("wp-locked")&&o.removeClass("wp-locked").delay(1e3).find(".locked-info span").empty()})}).on("heartbeat-send.wp-check-locked-posts",function(e,i){var s=[];t("#the-list tr").each(function(t,e){e.id&&s.push(e.id)}),s.length&&(i["wp-check-locked-posts"]=s)}).ready(function(){void 0!==e&&e.heartbeat&&e.heartbeat.interval(15)})}(jQuery,window.wp);