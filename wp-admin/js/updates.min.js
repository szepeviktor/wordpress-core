!function(t,e,i){var s=t(document);e=e||{},e.updates={},e.updates.ajaxNonce=i.ajax_nonce,e.updates.l10n=i.l10n,e.updates.searchTerm="",e.updates.shouldRequestFilesystemCredentials=!1,e.updates.filesystemCredentials={ftp:{host:"",username:"",password:"",connectionType:""},ssh:{publicKey:"",privateKey:""},fsNonce:"",available:!1},e.updates.ajaxLocked=!1,e.updates.adminNotice=e.template("wp-updates-admin-notice"),e.updates.queue=[],e.updates.$elToReturnFocusToFromCredentialsModal=undefined,e.updates.addAdminNotice=function(i){var r,n=t(i.selector),a=t(".wp-header-end");delete i.selector,r=e.updates.adminNotice(i),n.length||(n=t("#"+i.id)),n.length?n.replaceWith(r):a.length?a.after(r):"customize"===pagenow?t(".customize-themes-notifications").append(r):t(".wrap").find("> h1").after(r),s.trigger("wp-updates-notice-added")},e.updates.ajax=function(i,s){var r={};return e.updates.ajaxLocked?(e.updates.queue.push({action:i,data:s}),t.Deferred()):(e.updates.ajaxLocked=!0,s.success&&(r.success=s.success,delete s.success),s.error&&(r.error=s.error,delete s.error),r.data=_.extend(s,{action:i,_ajax_nonce:e.updates.ajaxNonce,_fs_nonce:e.updates.filesystemCredentials.fsNonce,username:e.updates.filesystemCredentials.ftp.username,password:e.updates.filesystemCredentials.ftp.password,hostname:e.updates.filesystemCredentials.ftp.hostname,connection_type:e.updates.filesystemCredentials.ftp.connectionType,public_key:e.updates.filesystemCredentials.ssh.publicKey,private_key:e.updates.filesystemCredentials.ssh.privateKey}),e.ajax.send(r).always(e.updates.ajaxAlways))},e.updates.ajaxAlways=function(i){i.errorCode&&"unable_to_connect_to_filesystem"===i.errorCode||(e.updates.ajaxLocked=!1,e.updates.queueChecker()),"undefined"!=typeof i.debug&&window.console&&window.console.log&&_.map(i.debug,function(e){window.console.log(t("<p />").html(e).text())})},e.updates.refreshCount=function(){var e,s=t("#wp-admin-bar-updates"),r=t('a[href="update-core.php"] .update-plugins'),n=t('a[href="plugins.php"] .update-plugins'),a=t('a[href="themes.php"] .update-plugins');s.find(".ab-item").removeAttr("title"),s.find(".ab-label").text(i.totals.counts.total),0===i.totals.counts.total&&s.find(".ab-label").parents("li").remove(),r.each(function(t,e){e.className=e.className.replace(/count-\d+/,"count-"+i.totals.counts.total)}),i.totals.counts.total>0?r.find(".update-count").text(i.totals.counts.total):r.remove(),n.each(function(t,e){e.className=e.className.replace(/count-\d+/,"count-"+i.totals.counts.plugins)}),i.totals.counts.total>0?n.find(".plugin-count").text(i.totals.counts.plugins):n.remove(),a.each(function(t,e){e.className=e.className.replace(/count-\d+/,"count-"+i.totals.counts.themes)}),i.totals.counts.total>0?a.find(".theme-count").text(i.totals.counts.themes):a.remove(),"plugins"===pagenow||"plugins-network"===pagenow?e=i.totals.counts.plugins:"themes"!==pagenow&&"themes-network"!==pagenow||(e=i.totals.counts.themes),e>0?t(".subsubsub .upgrade .count").text("("+e+")"):(t(".subsubsub .upgrade").remove(),t(".subsubsub li:last").html(function(){return t(this).children()}))},e.updates.decrementCount=function(t){i.totals.counts.total=Math.max(--i.totals.counts.total,0),"plugin"===t?i.totals.counts.plugins=Math.max(--i.totals.counts.plugins,0):"theme"===t&&(i.totals.counts.themes=Math.max(--i.totals.counts.themes,0)),e.updates.refreshCount(t)},e.updates.updatePlugin=function(i){var r,n,a,o;return i=_.extend({success:e.updates.updatePluginSuccess,error:e.updates.updatePluginError},i),"plugins"===pagenow||"plugins-network"===pagenow?(r=t('tr[data-plugin="'+i.plugin+'"]'),a=r.find(".update-message").removeClass("notice-error").addClass("updating-message notice-warning").find("p"),o=e.updates.l10n.pluginUpdatingLabel.replace("%s",r.find(".plugin-title strong").text())):"plugin-install"!==pagenow&&"plugin-install-network"!==pagenow||(n=t(".plugin-card-"+i.slug),a=n.find(".update-now").addClass("updating-message"),o=e.updates.l10n.pluginUpdatingLabel.replace("%s",a.data("name")),n.removeClass("plugin-card-update-failed").find(".notice.notice-error").remove()),a.html()!==e.updates.l10n.updating&&a.data("originaltext",a.html()),a.attr("aria-label",o).text(e.updates.l10n.updating),s.trigger("wp-plugin-updating",i),e.updates.ajax("update-plugin",i)},e.updates.updatePluginSuccess=function(i){var r,n,a;"plugins"===pagenow||"plugins-network"===pagenow?(r=t('tr[data-plugin="'+i.plugin+'"]').removeClass("update").addClass("updated"),n=r.find(".update-message").removeClass("updating-message notice-warning").addClass("updated-message notice-success").find("p"),a=r.find(".plugin-version-author-uri").html().replace(i.oldVersion,i.newVersion),r.find(".plugin-version-author-uri").html(a)):"plugin-install"!==pagenow&&"plugin-install-network"!==pagenow||(n=t(".plugin-card-"+i.slug).find(".update-now").removeClass("updating-message").addClass("button-disabled updated-message")),n.attr("aria-label",e.updates.l10n.pluginUpdatedLabel.replace("%s",i.pluginName)).text(e.updates.l10n.pluginUpdated),e.a11y.speak(e.updates.l10n.updatedMsg,"polite"),e.updates.decrementCount("plugin"),s.trigger("wp-plugin-update-success",i)},e.updates.updatePluginError=function(i){var r,n,a;e.updates.isValidResponse(i,"update")&&(e.updates.maybeHandleCredentialError(i,"update-plugin")||(a=e.updates.l10n.updateFailed.replace("%s",i.errorMessage),"plugins"===pagenow||"plugins-network"===pagenow?(n=i.plugin?t('tr[data-plugin="'+i.plugin+'"]').find(".update-message"):t('tr[data-slug="'+i.slug+'"]').find(".update-message"),n.removeClass("updating-message notice-warning").addClass("notice-error").find("p").html(a),i.pluginName?n.find("p").attr("aria-label",e.updates.l10n.pluginUpdateFailedLabel.replace("%s",i.pluginName)):n.find("p").removeAttr("aria-label")):"plugin-install"!==pagenow&&"plugin-install-network"!==pagenow||(r=t(".plugin-card-"+i.slug).addClass("plugin-card-update-failed").append(e.updates.adminNotice({className:"update-message notice-error notice-alt is-dismissible",message:a})),r.find(".update-now").text(e.updates.l10n.updateFailedShort).removeClass("updating-message"),i.pluginName?r.find(".update-now").attr("aria-label",e.updates.l10n.pluginUpdateFailedLabel.replace("%s",i.pluginName)):r.find(".update-now").removeAttr("aria-label"),r.on("click",".notice.is-dismissible .notice-dismiss",function(){setTimeout(function(){r.removeClass("plugin-card-update-failed").find(".column-name a").focus(),r.find(".update-now").attr("aria-label",!1).text(e.updates.l10n.updateNow)},200)})),e.a11y.speak(a,"assertive"),s.trigger("wp-plugin-update-error",i)))},e.updates.installPlugin=function(i){var r=t(".plugin-card-"+i.slug),n=r.find(".install-now");return i=_.extend({success:e.updates.installPluginSuccess,error:e.updates.installPluginError},i),"import"===pagenow&&(n=t('[data-slug="'+i.slug+'"]')),n.html()!==e.updates.l10n.installing&&n.data("originaltext",n.html()),n.addClass("updating-message").attr("aria-label",e.updates.l10n.pluginInstallingLabel.replace("%s",n.data("name"))).text(e.updates.l10n.installing),e.a11y.speak(e.updates.l10n.installingMsg,"polite"),r.removeClass("plugin-card-install-failed").find(".notice.notice-error").remove(),s.trigger("wp-plugin-installing",i),e.updates.ajax("install-plugin",i)},e.updates.installPluginSuccess=function(i){var r=t(".plugin-card-"+i.slug).find(".install-now");r.removeClass("updating-message").addClass("updated-message installed button-disabled").attr("aria-label",e.updates.l10n.pluginInstalledLabel.replace("%s",i.pluginName)).text(e.updates.l10n.pluginInstalled),e.a11y.speak(e.updates.l10n.installedMsg,"polite"),s.trigger("wp-plugin-install-success",i),i.activateUrl&&setTimeout(function(){r.removeClass("install-now installed button-disabled updated-message").addClass("activate-now button-primary").attr("href",i.activateUrl).attr("aria-label",e.updates.l10n.activatePluginLabel.replace("%s",i.pluginName)).text(e.updates.l10n.activatePlugin)},1e3)},e.updates.installPluginError=function(i){var r,n=t(".plugin-card-"+i.slug),a=n.find(".install-now");e.updates.isValidResponse(i,"install")&&(e.updates.maybeHandleCredentialError(i,"install-plugin")||(r=e.updates.l10n.installFailed.replace("%s",i.errorMessage),n.addClass("plugin-card-update-failed").append('<div class="notice notice-error notice-alt is-dismissible"><p>'+r+"</p></div>"),n.on("click",".notice.is-dismissible .notice-dismiss",function(){setTimeout(function(){n.removeClass("plugin-card-update-failed").find(".column-name a").focus()},200)}),a.removeClass("updating-message").addClass("button-disabled").attr("aria-label",e.updates.l10n.pluginInstallFailedLabel.replace("%s",a.data("name"))).text(e.updates.l10n.installFailedShort),e.a11y.speak(r,"assertive"),s.trigger("wp-plugin-install-error",i)))},e.updates.installImporterSuccess=function(i){e.updates.addAdminNotice({id:"install-success",className:"notice-success is-dismissible",message:e.updates.l10n.importerInstalledMsg.replace("%s",i.activateUrl+"&from=import")}),t('[data-slug="'+i.slug+'"]').removeClass("install-now updating-message").addClass("activate-now").attr({href:i.activateUrl+"&from=import","aria-label":e.updates.l10n.activateImporterLabel.replace("%s",i.pluginName)}).text(e.updates.l10n.activateImporter),e.a11y.speak(e.updates.l10n.installedMsg,"polite"),s.trigger("wp-importer-install-success",i)},e.updates.installImporterError=function(i){var r=e.updates.l10n.installFailed.replace("%s",i.errorMessage),n=t('[data-slug="'+i.slug+'"]'),a=n.data("name");e.updates.isValidResponse(i,"install")&&(e.updates.maybeHandleCredentialError(i,"install-plugin")||(e.updates.addAdminNotice({id:i.errorCode,className:"notice-error is-dismissible",message:r}),n.removeClass("updating-message").text(e.updates.l10n.installNow).attr("aria-label",e.updates.l10n.installNowLabel.replace("%s",a)),e.a11y.speak(r,"assertive"),s.trigger("wp-importer-install-error",i)))},e.updates.deletePlugin=function(i){var r=t('[data-plugin="'+i.plugin+'"]').find(".row-actions a.delete");return i=_.extend({success:e.updates.deletePluginSuccess,error:e.updates.deletePluginError},i),r.html()!==e.updates.l10n.deleting&&r.data("originaltext",r.html()).text(e.updates.l10n.deleting),e.a11y.speak(e.updates.l10n.deleting,"polite"),s.trigger("wp-plugin-deleting",i),e.updates.ajax("delete-plugin",i)},e.updates.deletePluginSuccess=function(r){t('[data-plugin="'+r.plugin+'"]').css({backgroundColor:"#faafaa"}).fadeOut(350,function(){var s=t("#bulk-action-form"),n=t(".subsubsub"),a=t(this),o=s.find("thead th:not(.hidden), thead td").length,h=e.template("item-deleted-row"),d=i.plugins;a.hasClass("plugin-update-tr")||a.after(h({slug:r.slug,plugin:r.plugin,colspan:o,name:r.pluginName})),a.remove(),-1!==_.indexOf(d.upgrade,r.plugin)&&(d.upgrade=_.without(d.upgrade,r.plugin),e.updates.decrementCount("plugin")),-1!==_.indexOf(d.inactive,r.plugin)&&(d.inactive=_.without(d.inactive,r.plugin),d.inactive.length?n.find(".inactive .count").text("("+d.inactive.length+")"):n.find(".inactive").remove()),-1!==_.indexOf(d.active,r.plugin)&&(d.active=_.without(d.active,r.plugin),d.active.length?n.find(".active .count").text("("+d.active.length+")"):n.find(".active").remove()),-1!==_.indexOf(d.recently_activated,r.plugin)&&(d.recently_activated=_.without(d.recently_activated,r.plugin),d.recently_activated.length?n.find(".recently_activated .count").text("("+d.recently_activated.length+")"):n.find(".recently_activated").remove()),d.all=_.without(d.all,r.plugin),d.all.length?n.find(".all .count").text("("+d.all.length+")"):(s.find(".tablenav").css({visibility:"hidden"}),n.find(".all").remove(),s.find("tr.no-items").length||s.find("#the-list").append('<tr class="no-items"><td class="colspanchange" colspan="'+o+'">'+e.updates.l10n.noPlugins+"</td></tr>"))}),e.a11y.speak(e.updates.l10n.pluginDeleted,"polite"),s.trigger("wp-plugin-delete-success",r)},e.updates.deletePluginError=function(i){var r,n,a=e.template("item-update-row"),o=e.updates.adminNotice({className:"update-message notice-error notice-alt",message:i.errorMessage});i.plugin?(r=t('tr.inactive[data-plugin="'+i.plugin+'"]'),n=r.siblings('[data-plugin="'+i.plugin+'"]')):(r=t('tr.inactive[data-slug="'+i.slug+'"]'),n=r.siblings('[data-slug="'+i.slug+'"]')),e.updates.isValidResponse(i,"delete")&&(e.updates.maybeHandleCredentialError(i,"delete-plugin")||(n.length?(n.find(".notice-error").remove(),n.find(".plugin-update").append(o)):r.addClass("update").after(a({slug:i.slug,plugin:i.plugin||i.slug,colspan:t("#bulk-action-form").find("thead th:not(.hidden), thead td").length,content:o})),s.trigger("wp-plugin-delete-error",i)))},e.updates.updateTheme=function(i){var r;return i=_.extend({success:e.updates.updateThemeSuccess,error:e.updates.updateThemeError},i),"themes-network"===pagenow?r=t('[data-slug="'+i.slug+'"]').find(".update-message").removeClass("notice-error").addClass("updating-message notice-warning").find("p"):"customize"===pagenow?(r=t('[data-slug="'+i.slug+'"].notice').removeClass("notice-large"),r.find("h3").remove(),r=r.add(t("#customize-control-installed_theme_"+i.slug).find(".update-message")),r=r.addClass("updating-message").find("p")):(r=t("#update-theme").closest(".notice").removeClass("notice-large"),r.find("h3").remove(),r=r.add(t('[data-slug="'+i.slug+'"]').find(".update-message")),r=r.addClass("updating-message").find("p")),r.html()!==e.updates.l10n.updating&&r.data("originaltext",r.html()),e.a11y.speak(e.updates.l10n.updatingMsg,"polite"),r.text(e.updates.l10n.updating),s.trigger("wp-theme-updating",i),e.updates.ajax("update-theme",i)},e.updates.updateThemeSuccess=function(i){var r,n,a=t("body.modal-open").length,o=t('[data-slug="'+i.slug+'"]'),h={className:"updated-message notice-success notice-alt",message:e.updates.l10n.themeUpdated};"customize"===pagenow?(o=t(".updating-message").siblings(".theme-name"),o.length&&(n=o.html().replace(i.oldVersion,i.newVersion),o.html(n)),r=t(".theme-info .notice").add(e.customize.control("installed_theme_"+i.slug).container.find(".theme").find(".update-message"))):"themes-network"===pagenow?(r=o.find(".update-message"),n=o.find(".theme-version-author-uri").html().replace(i.oldVersion,i.newVersion),o.find(".theme-version-author-uri").html(n)):(r=t(".theme-info .notice").add(o.find(".update-message")),a?t(".load-customize:visible").focus():o.find(".load-customize").focus()),e.updates.addAdminNotice(_.extend({selector:r},h)),e.a11y.speak(e.updates.l10n.updatedMsg,"polite"),e.updates.decrementCount("theme"),s.trigger("wp-theme-update-success",i),a&&"customize"!==pagenow&&t(".theme-info .theme-author").after(e.updates.adminNotice(h))},e.updates.updateThemeError=function(i){var r,n=t('[data-slug="'+i.slug+'"]'),a=e.updates.l10n.updateFailed.replace("%s",i.errorMessage);e.updates.isValidResponse(i,"update")&&(e.updates.maybeHandleCredentialError(i,"update-theme")||("customize"===pagenow&&(n=e.customize.control("installed_theme_"+i.slug).container.find(".theme")),"themes-network"===pagenow?r=n.find(".update-message "):(r=t(".theme-info .notice").add(n.find(".notice")),t("body.modal-open").length?t(".load-customize:visible").focus():n.find(".load-customize").focus()),e.updates.addAdminNotice({selector:r,className:"update-message notice-error notice-alt is-dismissible",message:a}),e.a11y.speak(a,"polite"),s.trigger("wp-theme-update-error",i)))},e.updates.installTheme=function(i){var r=t('.theme-install[data-slug="'+i.slug+'"]');return i=_.extend({success:e.updates.installThemeSuccess,error:e.updates.installThemeError},i),r.addClass("updating-message"),r.parents(".theme").addClass("focus"),r.html()!==e.updates.l10n.installing&&r.data("originaltext",r.html()),r.text(e.updates.l10n.installing).attr("aria-label",e.updates.l10n.themeInstallingLabel.replace("%s",r.data("name"))),e.a11y.speak(e.updates.l10n.installingMsg,"polite"),t('.install-theme-info, [data-slug="'+i.slug+'"]').removeClass("theme-install-failed").find(".notice.notice-error").remove(),s.trigger("wp-theme-installing",i),e.updates.ajax("install-theme",i)},e.updates.installThemeSuccess=function(i){var r,n=t(".wp-full-overlay-header, [data-slug="+i.slug+"]");s.trigger("wp-theme-install-success",i),r=n.find(".button-primary").removeClass("updating-message").addClass("updated-message disabled").attr("aria-label",e.updates.l10n.themeInstalledLabel.replace("%s",i.themeName)).text(e.updates.l10n.themeInstalled),e.a11y.speak(e.updates.l10n.installedMsg,"polite"),setTimeout(function(){i.activateUrl&&r.attr("href",i.activateUrl).removeClass("theme-install updated-message disabled").addClass("activate").attr("aria-label",e.updates.l10n.activateThemeLabel.replace("%s",i.themeName)).text(e.updates.l10n.activateTheme),i.customizeUrl&&r.siblings(".preview").replaceWith(function(){return t("<a>").attr("href",i.customizeUrl).addClass("button load-customize").text(e.updates.l10n.livePreview)})},1e3)},e.updates.installThemeError=function(i){var r,n,a=e.updates.l10n.installFailed.replace("%s",i.errorMessage),o=e.updates.adminNotice({className:"update-message notice-error notice-alt",message:a});e.updates.isValidResponse(i,"install")&&(e.updates.maybeHandleCredentialError(i,"install-theme")||("customize"===pagenow?(s.find("body").hasClass("modal-open")?(n=t('.theme-install[data-slug="'+i.slug+'"]'),r=t(".theme-overlay .theme-info").prepend(o)):(n=t('.theme-install[data-slug="'+i.slug+'"]'),r=n.closest(".theme").addClass("theme-install-failed").append(o)),e.customize.notifications.remove("theme_installing")):s.find("body").hasClass("full-overlay-active")?(n=t('.theme-install[data-slug="'+i.slug+'"]'),r=t(".install-theme-info").prepend(o)):(r=t('[data-slug="'+i.slug+'"]').removeClass("focus").addClass("theme-install-failed").append(o),n=r.find(".theme-install")),n.removeClass("updating-message").attr("aria-label",e.updates.l10n.themeInstallFailedLabel.replace("%s",n.data("name"))).text(e.updates.l10n.installFailedShort),e.a11y.speak(a,"assertive"),s.trigger("wp-theme-install-error",i)))},e.updates.deleteTheme=function(i){var r;return"themes"===pagenow?r=t(".theme-actions .delete-theme"):"themes-network"===pagenow&&(r=t('[data-slug="'+i.slug+'"]').find(".row-actions a.delete")),i=_.extend({success:e.updates.deleteThemeSuccess,error:e.updates.deleteThemeError},i),r&&r.html()!==e.updates.l10n.deleting&&r.data("originaltext",r.html()).text(e.updates.l10n.deleting),e.a11y.speak(e.updates.l10n.deleting,"polite"),t(".theme-info .update-message").remove(),s.trigger("wp-theme-deleting",i),e.updates.ajax("delete-theme",i)},e.updates.deleteThemeSuccess=function(r){var n=t('[data-slug="'+r.slug+'"]');"themes-network"===pagenow&&n.css({backgroundColor:"#faafaa"}).fadeOut(350,function(){var s=t(".subsubsub"),n=t(this),a=i.themes,o=e.template("item-deleted-row");n.hasClass("plugin-update-tr")||n.after(o({slug:r.slug,colspan:t("#bulk-action-form").find("thead th:not(.hidden), thead td").length,name:n.find(".theme-title strong").text()})),n.remove(),n.hasClass("update")&&(a.upgrade--,e.updates.decrementCount("theme")),n.hasClass("inactive")&&(a.disabled--,a.disabled?s.find(".disabled .count").text("("+a.disabled+")"):s.find(".disabled").remove()),s.find(".all .count").text("("+--a.all+")")}),e.a11y.speak(e.updates.l10n.themeDeleted,"polite"),s.trigger("wp-theme-delete-success",r)},e.updates.deleteThemeError=function(i){var r=t('tr.inactive[data-slug="'+i.slug+'"]'),n=t(".theme-actions .delete-theme"),a=e.template("item-update-row"),o=r.siblings("#"+i.slug+"-update"),h=e.updates.l10n.deleteFailed.replace("%s",i.errorMessage),d=e.updates.adminNotice({className:"update-message notice-error notice-alt",message:h});e.updates.maybeHandleCredentialError(i,"delete-theme")||("themes-network"===pagenow?o.length?(o.find(".notice-error").remove(),o.find(".plugin-update").append(d)):r.addClass("update").after(a({slug:i.slug,colspan:t("#bulk-action-form").find("thead th:not(.hidden), thead td").length,content:d})):t(".theme-info .theme-description").before(d),n.html(n.data("originaltext")),e.a11y.speak(h,"assertive"),s.trigger("wp-theme-delete-error",i))},e.updates._addCallbacks=function(t,i){return"import"===pagenow&&"install-plugin"===i&&(t.success=e.updates.installImporterSuccess,t.error=e.updates.installImporterError),t},e.updates.queueChecker=function(){var t;if(!e.updates.ajaxLocked&&e.updates.queue.length)switch(t=e.updates.queue.shift(),t.action){case"install-plugin":e.updates.installPlugin(t.data);break;case"update-plugin":e.updates.updatePlugin(t.data);break;case"delete-plugin":e.updates.deletePlugin(t.data);break;case"install-theme":e.updates.installTheme(t.data);break;case"update-theme":e.updates.updateTheme(t.data);break;case"delete-theme":e.updates.deleteTheme(t.data)}},e.updates.requestFilesystemCredentials=function(i){!1===e.updates.filesystemCredentials.available&&(i&&!e.updates.$elToReturnFocusToFromCredentialsModal&&(e.updates.$elToReturnFocusToFromCredentialsModal=t(i.target)),e.updates.ajaxLocked=!0,e.updates.requestForCredentialsModalOpen())},e.updates.maybeRequestFilesystemCredentials=function(t){e.updates.shouldRequestFilesystemCredentials&&!e.updates.ajaxLocked&&e.updates.requestFilesystemCredentials(t)},e.updates.keydown=function(i){27===i.keyCode?e.updates.requestForCredentialsModalCancel():9===i.keyCode&&("upgrade"!==i.target.id||i.shiftKey?"hostname"===i.target.id&&i.shiftKey&&(t("#upgrade").focus(),i.preventDefault()):(t("#hostname").focus(),i.preventDefault()))},e.updates.requestForCredentialsModalOpen=function(){var i=t("#request-filesystem-credentials-dialog");t("body").addClass("modal-open"),i.show(),i.find("input:enabled:first").focus(),i.on("keydown",e.updates.keydown)},e.updates.requestForCredentialsModalClose=function(){t("#request-filesystem-credentials-dialog").hide(),t("body").removeClass("modal-open"),e.updates.$elToReturnFocusToFromCredentialsModal&&e.updates.$elToReturnFocusToFromCredentialsModal.focus()},e.updates.requestForCredentialsModalCancel=function(){(e.updates.ajaxLocked||e.updates.queue.length)&&(_.each(e.updates.queue,function(t){s.trigger("credential-modal-cancel",t)}),e.updates.ajaxLocked=!1,e.updates.queue=[],e.updates.requestForCredentialsModalClose())},e.updates.showErrorInCredentialsForm=function(e){var i=t("#request-filesystem-credentials-form");i.find(".notice").remove(),i.find("#request-filesystem-credentials-title").after('<div class="notice notice-alt notice-error"><p>'+e+"</p></div>")},e.updates.credentialError=function(t,i){t=e.updates._addCallbacks(t,i),e.updates.queue.unshift({action:i,data:t}),e.updates.filesystemCredentials.available=!1,e.updates.showErrorInCredentialsForm(t.errorMessage),e.updates.requestFilesystemCredentials()},e.updates.maybeHandleCredentialError=function(t,i){return!(!e.updates.shouldRequestFilesystemCredentials||!t.errorCode||"unable_to_connect_to_filesystem"!==t.errorCode)&&(e.updates.credentialError(t,i),!0)},e.updates.isValidResponse=function(i,s){var r,n=e.updates.l10n.unknownError;if(_.isObject(i)&&!_.isFunction(i.always))return!0;switch(_.isString(i)&&"-1"===i?n=e.updates.l10n.nonceError:_.isString(i)?n=i:"undefined"!=typeof i.readyState&&0===i.readyState?n=e.updates.l10n.connectionError:_.isString(i.responseText)&&""!==i.responseText?n=i.responseText:_.isString(i.statusText)&&(n=i.statusText),s){case"update":r=e.updates.l10n.updateFailed;break;case"install":r=e.updates.l10n.installFailed;break;case"delete":r=e.updates.l10n.deleteFailed}return n=n.replace(/<[\/a-z][^<>]*>/gi,""),r=r.replace("%s",n),e.updates.addAdminNotice({id:"unknown_error",className:"notice-error is-dismissible",message:_.escape(r)}),e.updates.ajaxLocked=!1,e.updates.queue=[],t(".button.updating-message").removeClass("updating-message").removeAttr("aria-label").prop("disabled",!0).text(e.updates.l10n.updateFailedShort),t(".updating-message:not(.button):not(.thickbox)").removeClass("updating-message notice-warning").addClass("notice-error").find("p").removeAttr("aria-label").text(r),e.a11y.speak(r,"assertive"),!1},e.updates.beforeunload=function(){if(e.updates.ajaxLocked)return e.updates.l10n.beforeunload},t(function(){var r=t("#plugin-filter"),n=t("#bulk-action-form"),a=t("#request-filesystem-credentials-form"),o=t("#request-filesystem-credentials-dialog"),h=t(".plugins-php .wp-filter-search"),d=t(".plugin-install-php .wp-filter-search");i=_.extend(i,window._wpUpdatesItemCounts||{}),i.totals&&e.updates.refreshCount(),e.updates.shouldRequestFilesystemCredentials=o.length>0,o.on("submit","form",function(i){i.preventDefault(),e.updates.filesystemCredentials.ftp.hostname=t("#hostname").val(),e.updates.filesystemCredentials.ftp.username=t("#username").val(),e.updates.filesystemCredentials.ftp.password=t("#password").val(),e.updates.filesystemCredentials.ftp.connectionType=t('input[name="connection_type"]:checked').val(),e.updates.filesystemCredentials.ssh.publicKey=t("#public_key").val(),e.updates.filesystemCredentials.ssh.privateKey=t("#private_key").val(),e.updates.filesystemCredentials.fsNonce=t("#_fs_nonce").val(),e.updates.filesystemCredentials.available=!0,e.updates.ajaxLocked=!1,e.updates.queueChecker(),e.updates.requestForCredentialsModalClose()}),o.on("click",'[data-js-action="close"], .notification-dialog-background',e.updates.requestForCredentialsModalCancel),a.on("change",'input[name="connection_type"]',function(){t("#ssh-keys").toggleClass("hidden","ssh"!==t(this).val())}).change(),s.on("credential-modal-cancel",function(i,s){var r,n,a=t(".updating-message");"import"===pagenow?a.removeClass("updating-message"):"plugins"===pagenow||"plugins-network"===pagenow?"update-plugin"===s.action?r=t('tr[data-plugin="'+s.data.plugin+'"]').find(".update-message"):"delete-plugin"===s.action&&(r=t('[data-plugin="'+s.data.plugin+'"]').find(".row-actions a.delete")):"themes"===pagenow||"themes-network"===pagenow?"update-theme"===s.action?r=t('[data-slug="'+s.data.slug+'"]').find(".update-message"):"delete-theme"===s.action&&"themes-network"===pagenow?r=t('[data-slug="'+s.data.slug+'"]').find(".row-actions a.delete"):"delete-theme"===s.action&&"themes"===pagenow&&(r=t(".theme-actions .delete-theme")):r=a,r&&r.hasClass("updating-message")&&(n=r.data("originaltext"),void 0===n&&(n=t("<p>").html(r.find("p").data("originaltext"))),r.removeClass("updating-message").html(n),"plugin-install"!==pagenow&&"plugin-install-network"!==pagenow||("update-plugin"===s.action?r.attr("aria-label",e.updates.l10n.pluginUpdateNowLabel.replace("%s",r.data("name"))):"install-plugin"===s.action&&r.attr("aria-label",e.updates.l10n.pluginInstallNowLabel.replace("%s",r.data("name"))))),e.a11y.speak(e.updates.l10n.updateCancel,"polite")}),n.on("click","[data-plugin] .update-link",function(i){var s=t(i.target),r=s.parents("tr");i.preventDefault(),s.hasClass("updating-message")||s.hasClass("button-disabled")||(e.updates.maybeRequestFilesystemCredentials(i),e.updates.$elToReturnFocusToFromCredentialsModal=r.find(".check-column input"),e.updates.updatePlugin({plugin:r.data("plugin"),slug:r.data("slug")}))}),r.on("click",".update-now",function(i){var s=t(i.target);i.preventDefault(),s.hasClass("updating-message")||s.hasClass("button-disabled")||(e.updates.maybeRequestFilesystemCredentials(i),e.updates.updatePlugin({plugin:s.data("plugin"),slug:s.data("slug")}))}),r.on("click",".install-now",function(i){var r=t(i.target);i.preventDefault(),r.hasClass("updating-message")||r.hasClass("button-disabled")||(e.updates.shouldRequestFilesystemCredentials&&!e.updates.ajaxLocked&&(e.updates.requestFilesystemCredentials(i),s.on("credential-modal-cancel",function(){t(".install-now.updating-message").removeClass("updating-message").text(e.updates.l10n.installNow),e.a11y.speak(e.updates.l10n.updateCancel,"polite")})),e.updates.installPlugin({slug:r.data("slug")}))}),s.on("click",".importer-item .install-now",function(i){var r=t(i.target),n=t(this).data("name");i.preventDefault(),r.hasClass("updating-message")||(e.updates.shouldRequestFilesystemCredentials&&!e.updates.ajaxLocked&&(e.updates.requestFilesystemCredentials(i),s.on("credential-modal-cancel",function(){r.removeClass("updating-message").text(e.updates.l10n.installNow).attr("aria-label",e.updates.l10n.installNowLabel.replace("%s",n)),e.a11y.speak(e.updates.l10n.updateCancel,"polite")})),e.updates.installPlugin({slug:r.data("slug"),pagenow:pagenow,success:e.updates.installImporterSuccess,error:e.updates.installImporterError}))}),n.on("click","[data-plugin] a.delete",function(i){var s=t(i.target).parents("tr");i.preventDefault(),window.confirm(e.updates.l10n.aysDeleteUninstall.replace("%s",s.find(".plugin-title strong").text()))&&(e.updates.maybeRequestFilesystemCredentials(i),e.updates.deletePlugin({plugin:s.data("plugin"),slug:s.data("slug")}))}),s.on("click",".themes-php.network-admin .update-link",function(i){var s=t(i.target),r=s.parents("tr");i.preventDefault(),s.hasClass("updating-message")||s.hasClass("button-disabled")||(e.updates.maybeRequestFilesystemCredentials(i),e.updates.$elToReturnFocusToFromCredentialsModal=r.find(".check-column input"),e.updates.updateTheme({slug:r.data("slug")}))}),s.on("click",".themes-php.network-admin a.delete",function(i){var s=t(i.target).parents("tr");i.preventDefault(),window.confirm(e.updates.l10n.aysDelete.replace("%s",s.find(".theme-title strong").text()))&&(e.updates.maybeRequestFilesystemCredentials(i),e.updates.deleteTheme({slug:s.data("slug")}))}),n.on("click",'[type="submit"]:not([name="clear-recent-list"])',function(i){var r,a,o=t(i.target).siblings("select").val(),h=n.find('input[name="checked[]"]:checked'),d=0,c=0,l=[];switch(pagenow){case"plugins":case"plugins-network":r="plugin";break;case"themes-network":r="theme";break;default:return}if(!h.length)return i.preventDefault(),t("html, body").animate({scrollTop:0}),e.updates.addAdminNotice({id:"no-items-selected",className:"notice-error is-dismissible",message:e.updates.l10n.noItemsSelected});switch(o){case"update-selected":a=o.replace("selected",r);break;case"delete-selected":if(!window.confirm("plugin"===r?e.updates.l10n.aysBulkDelete:e.updates.l10n.aysBulkDeleteThemes))return void i.preventDefault();a=o.replace("selected",r);break;default:return}e.updates.maybeRequestFilesystemCredentials(i),i.preventDefault(),n.find('.manage-column [type="checkbox"]').prop("checked",!1),s.trigger("wp-"+r+"-bulk-"+o,h),h.each(function(i,s){var r=t(s),n=r.parents("tr");if("update-selected"===o&&(!n.hasClass("update")||n.find("notice-error").length))return void r.prop("checked",!1);e.updates.queue.push({action:a,data:{plugin:n.data("plugin"),slug:n.data("slug")}})}),s.on("wp-plugin-update-success wp-plugin-update-error wp-theme-update-success wp-theme-update-error",function(i,s){var r,n,a=t('[data-slug="'+s.slug+'"]');"wp-"+s.update+"-update-success"===i.type?d++:(n=s.pluginName?s.pluginName:a.find(".column-primary strong").text(),c++,l.push(n+": "+s.errorMessage)),a.find('input[name="checked[]"]:checked').prop("checked",!1),e.updates.adminNotice=e.template("wp-bulk-updates-admin-notice"),e.updates.addAdminNotice({id:"bulk-action-notice",className:"bulk-action-notice",successes:d,errors:c,errorMessages:l,type:s.update}),r=t("#bulk-action-notice").on("click","button",function(){t(this).toggleClass("bulk-action-errors-collapsed").attr("aria-expanded",!t(this).hasClass("bulk-action-errors-collapsed")),r.find(".bulk-action-errors").toggleClass("hidden")}),c>0&&!e.updates.queue.length&&t("html, body").animate({scrollTop:0})}),s.on("wp-updates-notice-added",function(){e.updates.adminNotice=e.template("wp-updates-admin-notice")}),e.updates.queueChecker()}),d.length&&d.attr("aria-describedby","live-search-desc"),d.on("keyup input",_.debounce(function(i,s){var n,a,o=t(".plugin-install-search");n={_ajax_nonce:e.updates.ajaxNonce,s:i.target.value,tab:"search",type:t("#typeselector").val(),pagenow:pagenow},a=location.href.split("?")[0]+"?"+t.param(_.omit(n,["_ajax_nonce","pagenow"])),"keyup"===i.type&&27===i.which&&(i.target.value=""),e.updates.searchTerm===n.s&&"typechange"!==s||(r.empty(),e.updates.searchTerm=n.s,
window.history&&window.history.replaceState&&window.history.replaceState(null,"",a),o.length||(o=t('<li class="plugin-install-search" />').append(t("<a />",{"class":"current",href:a,text:e.updates.l10n.searchResultsLabel})),t(".wp-filter .filter-links .current").removeClass("current").parents(".filter-links").prepend(o),r.prev("p").remove(),t(".plugins-popular-tags-wrapper").remove()),"undefined"!=typeof e.updates.searchRequest&&e.updates.searchRequest.abort(),t("body").addClass("loading-content"),e.updates.searchRequest=e.ajax.post("search-install-plugins",n).done(function(i){t("body").removeClass("loading-content"),r.append(i.items),delete e.updates.searchRequest,0===i.count?e.a11y.speak(e.updates.l10n.noPluginsFound):e.a11y.speak(e.updates.l10n.pluginsFound.replace("%d",i.count))}))},500)),h.length&&h.attr("aria-describedby","live-search-desc"),h.on("keyup input",_.debounce(function(i){var s,r={_ajax_nonce:e.updates.ajaxNonce,s:i.target.value,pagenow:pagenow,plugin_status:"all"};"keyup"===i.type&&27===i.which&&(i.target.value=""),e.updates.searchTerm!==r.s&&(e.updates.searchTerm=r.s,s=_.object(_.compact(_.map(location.search.slice(1).split("&"),function(t){if(t)return t.split("=")}))),r.plugin_status=s.plugin_status||"all",window.history&&window.history.replaceState&&window.history.replaceState(null,"",location.href.split("?")[0]+"?s="+r.s+"&plugin_status="+r.plugin_status),"undefined"!=typeof e.updates.searchRequest&&e.updates.searchRequest.abort(),n.empty(),t("body").addClass("loading-content"),t(".subsubsub .current").removeClass("current"),e.updates.searchRequest=e.ajax.post("search-plugins",r).done(function(i){var s=t("<span />").addClass("subtitle").html(e.updates.l10n.searchResults.replace("%s",_.escape(r.s))),a=t(".wrap .subtitle");r.s.length?a.length?a.replaceWith(s):t(".wp-header-end").before(s):(a.remove(),t(".subsubsub ."+r.plugin_status+" a").addClass("current")),t("body").removeClass("loading-content"),n.append(i.items),delete e.updates.searchRequest,0===i.count?e.a11y.speak(e.updates.l10n.noPluginsFound):e.a11y.speak(e.updates.l10n.pluginsFound.replace("%d",i.count))}))},500)),s.on("submit",".search-plugins",function(e){e.preventDefault(),t("input.wp-filter-search").trigger("input")}),s.on("click",".try-again",function(t){t.preventDefault(),d.trigger("input")}),t("#typeselector").on("change",function(){var e=t('input[name="s"]');e.val().length&&e.trigger("input","typechange")}),t("#plugin_update_from_iframe").on("click",function(e){var i,s=window.parent===window?null:window.parent;t.support.postMessage=!!window.postMessage,!1!==t.support.postMessage&&null!==s&&-1===window.parent.location.pathname.indexOf("update-core.php")&&(e.preventDefault(),i={action:"update-plugin",data:{plugin:t(this).data("plugin"),slug:t(this).data("slug")}},s.postMessage(JSON.stringify(i),window.location.origin))}),t("#plugin_install_from_iframe").on("click",function(e){var i,s=window.parent===window?null:window.parent;t.support.postMessage=!!window.postMessage,!1!==t.support.postMessage&&null!==s&&-1===window.parent.location.pathname.indexOf("index.php")&&(e.preventDefault(),i={action:"install-plugin",data:{slug:t(this).data("slug")}},s.postMessage(JSON.stringify(i),window.location.origin))}),t(window).on("message",function(i){var s,r=i.originalEvent,n=document.location.protocol+"//"+document.location.hostname;if(r.origin===n){try{s=t.parseJSON(r.data)}catch(a){return}if(s&&"undefined"!=typeof s.action)switch(s.action){case"decrementUpdateCount":e.updates.decrementCount(s.upgradeType);break;case"install-plugin":case"update-plugin":window.tb_remove(),s.data=e.updates._addCallbacks(s.data,s.action),e.updates.queue.push(s),e.updates.queueChecker()}}}),t(window).on("beforeunload",e.updates.beforeunload)})}(jQuery,window.wp,window._wpUpdatesSettings);