window.wp=window.wp||{},function(t,e){function i(){function i(){!x&&window.tinymce&&(x=window.tinymce,A=x.$,A(document).on("click",function(t){var e,i,s=A(t.target);s.hasClass("wp-switch-editor")&&(e=s.attr("data-wp-editor-id"),i=s.hasClass("switch-tmce")?"tmce":"html",r(e,i))}))}function s(t){var e=A(".mce-toolbar-grp",t.getContainer())[0],i=e&&e.clientHeight;return i&&i>10&&i<200?parseInt(i,10):30}function r(t,e){t=t||"content",e=e||"toggle";var i,r,n,a=x.get(t),o=A("#wp-"+t+"-wrap"),h=A("#"+t),d=h[0];if("toggle"===e&&(e=a&&!a.isHidden()?"html":"tmce"),"tmce"===e||"tinymce"===e){if(a&&!a.isHidden())return!1;"undefined"!=typeof window.QTags&&window.QTags.closeAllTags(t),i=parseInt(d.style.height,10)||0;var c=!1;c=a?a.getParam("wp_keep_scroll_position"):window.tinyMCEPreInit.mceInit[t]&&window.tinyMCEPreInit.mceInit[t].wp_keep_scroll_position,c&&l(h),a?(a.show(),!x.Env.iOS&&i&&(r=s(a),(i=i-r+14)>50&&i<5e3&&a.theme.resizeTo(null,i)),a.getParam("wp_keep_scroll_position")&&u(a)):x.init(window.tinyMCEPreInit.mceInit[t]),o.removeClass("html-active").addClass("tmce-active"),h.attr("aria-hidden",!0),window.setUserSetting("editor","tinymce")}else if("html"===e){if(a&&a.isHidden())return!1;if(a){x.Env.iOS||(n=a.iframeElement,(i=n?parseInt(n.style.height,10):0)&&(r=s(a),(i=i+r-14)>50&&i<5e3&&(d.style.height=i+"px")));var p=null;a.getParam("wp_keep_scroll_position")&&(p=f(a)),a.hide(),p&&_(a,p)}else h.css({display:"",visibility:""});o.removeClass("tmce-active").addClass("html-active"),h.attr("aria-hidden",!1),window.setUserSetting("editor","html")}}function n(t,e){var i=t.lastIndexOf("<",e-1);if(i>t.lastIndexOf(">",e)||">"===t.substr(e,1)){var s=t.substr(i),r=s.match(/<\s*(\/)?(\w+)/);if(!r)return null;var n=r[2];return{ltPos:i,gtPos:i+s.indexOf(">")+1,tagType:n,isClosingTag:!!r[1]}}return null}function a(t,e){for(var i=h(t),s=0;s<i.length;s++){var r=i[s];if(e>=r.startIndex&&e<=r.endIndex)return r}}function o(t){var e=t.match(/\[+([\w_-])+/g),i=[];if(e)for(var s=0;s<e.length;s++){var r=e[s].replace(/^\[+/g,"");-1===i.indexOf(r)&&i.push(r)}return i}function h(t){var i,s=o(t);if(0===s.length)return[];for(var r,n=e.shortcode.regexp(s.join("|")),a=[];r=n.exec(t);){var h="["===r[1];i={shortcodeName:r[2],showAsPlainText:h,startIndex:r.index,endIndex:r.index+r[0].length,length:r[0].length},a.push(i)}for(var d=new RegExp('(^|[\\n\\r][\\n\\r]|<p>)(https?:\\/\\/[^s"]+?)(<\\/p>s*|[\\n\\r][\\n\\r]|$)',"gi");r=d.exec(t);)i={shortcodeName:"url",showAsPlainText:!1,startIndex:r.index,endIndex:r.index+r[0].length,length:r[0].length,urlAtStartOfContent:""===r[1],urlAtEndOfContent:""===r[3]},a.push(i);return a}function d(t,e){return t("<span>").css({display:"inline-block",width:0,overflow:"hidden","line-height":0}).html(e||"")}function c(t,e){var i=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],s=e.cursorStart,r=e.cursorEnd,o=n(t,s);o&&(s=-1!==i.indexOf(o.tagType)?o.ltPos:o.gtPos);var h=n(t,r);h&&(r=h.gtPos);var d=a(t,s);d&&!d.showAsPlainText&&(s=d.urlAtStartOfContent?d.endIndex:d.startIndex);var c=a(t,r);return c&&!c.showAsPlainText&&(r=c.urlAtEndOfContent?c.startIndex:c.endIndex),{cursorStart:s,cursorEnd:r}}function l(t){if(t&&t.length){var e=t[0],i=e.value,s=c(i,{cursorStart:e.selectionStart,cursorEnd:e.selectionEnd}),r=s.cursorStart,n=s.cursorEnd,a=r!==n?"range":"single",o=null,h=d(A,"&#65279;").attr("data-mce-type","bookmark");if("range"===a){o=[e.value.slice(r,n),h.clone().addClass("mce_SELRES_end")[0].outerHTML].join("")}e.value=[e.value.slice(0,r),h.clone().addClass("mce_SELRES_start")[0].outerHTML,o,e.value.slice(n)].join("")}}function u(t){var e=t.$(".mce_SELRES_start").attr("data-mce-bogus",1),i=t.$(".mce_SELRES_end").attr("data-mce-bogus",1);if(e.length)if(t.focus(),i.length){var s=t.getDoc().createRange();s.setStartAfter(e[0]),s.setEndBefore(i[0]),t.selection.setRng(s)}else t.selection.select(e[0]);t.getParam("wp_keep_scroll_position")&&m(t,e),p(e),p(i),t.save()}function p(t){var e=t.parent();t.remove(),!e.is("p")||e.children().length||e.text()||e.remove()}function m(e,i){var r,n=e.$(i).offset().top,a=e.$(e.getContentAreaContainer()).offset().top,o=s(e),h=t("#wp-content-editor-tools"),d=0,c=0;h.length&&(d=h.height(),c=h.offset().top);var l=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,u=a+n,p=l-(d+o);if(!(u<p)){var m;e.settings.wp_autoresize_on?(r=t("html,body"),m=Math.max(u-p/2,c-d)):(r=t(e.contentDocument).find("html,body"),m=n),r.animate({scrollTop:parseInt(m,10)},100)}}function g(t){t.content=t.content.replace(/<p>(?:<br ?\/?>|\u00a0|\uFEFF| )*<\/p>/g,"<p>&nbsp;</p>")}function f(t){var e=t.getWin(),i=e.getSelection();if(i&&!(i.rangeCount<1)){var s="SELRES_"+Math.random(),r=d(t.$,s),n=r.clone().addClass("mce_SELRES_start"),a=r.clone().addClass("mce_SELRES_end"),o=i.getRangeAt(0),h=o.startContainer,c=o.startOffset,l=o.cloneRange();t.$(h).parents(".mce-offscreen-selection").length>0?(h=t.$("[data-mce-selected]")[0],n.attr("data-mce-object-selection","true"),a.attr("data-mce-object-selection","true"),t.$(h).before(n[0]),t.$(h).after(a[0])):(l.collapse(!1),l.insertNode(a[0]),l.setStart(h,c),l.collapse(!0),l.insertNode(n[0]),o.setStartAfter(n[0]),o.setEndBefore(a[0]),i.removeAllRanges(),i.addRange(o)),t.on("GetContent",g);var u=v(t.getContent());t.off("GetContent",g),n.remove(),a.remove();var p=new RegExp('<span[^>]*\\s*class="mce_SELRES_start"[^>]+>\\s*'+s+"[^<]*<\\/span>(\\s*)"),m=new RegExp('(\\s*)<span[^>]*\\s*class="mce_SELRES_end"[^>]+>\\s*'+s+"[^<]*<\\/span>"),f=u.match(p),_=u.match(m);if(!f)return null;var y=f.index,w=f[0].length,b=null;if(_){-1!==f[0].indexOf("data-mce-object-selection")&&(w-=f[1].length);var x=_.index;-1!==_[0].indexOf("data-mce-object-selection")&&(x-=_[1].length),b=x-w}return{start:y,end:b}}}function _(t,e){if(e){var i=t.getElement(),s=e.start,r=e.end||e.start;i.focus&&setTimeout(function(){i.setSelectionRange(s,r),i.blur&&i.blur(),i.focus()},100)}}function v(t){var e="blockquote|ul|ol|li|dl|dt|dd|table|thead|tbody|tfoot|tr|th|td|h[1-6]|fieldset|figure",i=e+"|div|p",s=e+"|pre",r=!1,n=!1,a=[];return t?(-1===t.indexOf("<script")&&-1===t.indexOf("<style")||(t=t.replace(/<(script|style)[^>]*>[\s\S]*?<\/\1>/g,function(t){return a.push(t),"<wp-preserve>"})),-1!==t.indexOf("<pre")&&(r=!0,t=t.replace(/<pre[^>]*>[\s\S]+?<\/pre>/g,function(t){return t=t.replace(/<br ?\/?>(\r\n|\n)?/g,"<wp-line-break>"),t=t.replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"<wp-line-break>"),t.replace(/\r?\n/g,"<wp-line-break>")})),-1!==t.indexOf("[caption")&&(n=!0,t=t.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(t){return t.replace(/<br([^>]*)>/g,"<wp-temp-br$1>").replace(/[\r\n\t]+/,"")})),t=t.replace(new RegExp("\\s*</("+i+")>\\s*","g"),"</$1>\n"),t=t.replace(new RegExp("\\s*<((?:"+i+")(?: [^>]*)?)>","g"),"\n<$1>"),t=t.replace(/(<p [^>]+>.*?)<\/p>/g,"$1</p#>"),t=t.replace(/<div( [^>]*)?>\s*<p>/gi,"<div$1>\n\n"),t=t.replace(/\s*<p>/gi,""),t=t.replace(/\s*<\/p>\s*/gi,"\n\n"),t=t.replace(/\n[\s\u00a0]+\n/g,"\n\n"),t=t.replace(/(\s*)<br ?\/?>\s*/gi,function(t,e){return e&&-1!==e.indexOf("\n")?"\n\n":"\n"}),t=t.replace(/\s*<div/g,"\n<div"),t=t.replace(/<\/div>\s*/g,"</div>\n"),t=t.replace(/\s*\[caption([^\[]+)\[\/caption\]\s*/gi,"\n\n[caption$1[/caption]\n\n"),t=t.replace(/caption\]\n\n+\[caption/g,"caption]\n\n[caption"),t=t.replace(new RegExp("\\s*<((?:"+s+")(?: [^>]*)?)\\s*>","g"),"\n<$1>"),t=t.replace(new RegExp("\\s*</("+s+")>\\s*","g"),"</$1>\n"),t=t.replace(/<((li|dt|dd)[^>]*)>/g," \t<$1>"),-1!==t.indexOf("<option")&&(t=t.replace(/\s*<option/g,"\n<option"),t=t.replace(/\s*<\/select>/g,"\n</select>")),-1!==t.indexOf("<hr")&&(t=t.replace(/\s*<hr( [^>]*)?>\s*/g,"\n\n<hr$1>\n\n")),-1!==t.indexOf("<object")&&(t=t.replace(/<object[\s\S]+?<\/object>/g,function(t){return t.replace(/[\r\n]+/g,"")})),t=t.replace(/<\/p#>/g,"</p>\n"),t=t.replace(/\s*(<p [^>]+>[\s\S]*?<\/p>)/g,"\n$1"),t=t.replace(/^\s+/,""),t=t.replace(/[\s\u00a0]+$/,""),r&&(t=t.replace(/<wp-line-break>/g,"\n")),n&&(t=t.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),a.length&&(t=t.replace(/<wp-preserve>/g,function(){return a.shift()})),t):""}function y(t){var e=!1,i=!1,s="table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary";return t=t.replace(/\r\n|\r/g,"\n"),-1!==t.indexOf("<object")&&(t=t.replace(/<object[\s\S]+?<\/object>/g,function(t){return t.replace(/\n+/g,"")})),t=t.replace(/<[^<>]+>/g,function(t){return t.replace(/[\n\t ]+/g," ")}),-1===t.indexOf("<pre")&&-1===t.indexOf("<script")||(e=!0,t=t.replace(/<(pre|script)[^>]*>[\s\S]*?<\/\1>/g,function(t){return t.replace(/\n/g,"<wp-line-break>")})),-1!==t.indexOf("<figcaption")&&(t=t.replace(/\s*(<figcaption[^>]*>)/g,"$1"),t=t.replace(/<\/figcaption>\s*/g,"</figcaption>")),-1!==t.indexOf("[caption")&&(i=!0,t=t.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(t){return t=t.replace(/<br([^>]*)>/g,"<wp-temp-br$1>"),t=t.replace(/<[^<>]+>/g,function(t){return t.replace(/[\n\t ]+/," ")}),t.replace(/\s*\n\s*/g,"<wp-temp-br />")})),t+="\n\n",t=t.replace(/<br \/>\s*<br \/>/gi,"\n\n"),t=t.replace(new RegExp("(<(?:"+s+")(?: [^>]*)?>)","gi"),"\n\n$1"),t=t.replace(new RegExp("(</(?:"+s+")>)","gi"),"$1\n\n"),t=t.replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n"),t=t.replace(/\s*<option/gi,"<option"),t=t.replace(/<\/option>\s*/gi,"</option>"),t=t.replace(/\n\s*\n+/g,"\n\n"),t=t.replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n"),t=t.replace(/<p>\s*?<\/p>/gi,""),t=t.replace(new RegExp("<p>\\s*(</?(?:"+s+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),t=t.replace(/<p>(<li.+?)<\/p>/gi,"$1"),t=t.replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>"),t=t.replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>"),t=t.replace(new RegExp("<p>\\s*(</?(?:"+s+")(?: [^>]*)?>)","gi"),"$1"),t=t.replace(new RegExp("(</?(?:"+s+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),t=t.replace(/(<br[^>]*>)\s*\n/gi,"$1"),t=t.replace(/\s*\n/g,"<br />\n"),t=t.replace(new RegExp("(</?(?:"+s+")[^>]*>)\\s*<br />","gi"),"$1"),t=t.replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1"),t=t.replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]"),t=t.replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,function(t,e,i){return i.match(/<p( [^>]*)?>/)?t:e+"<p>"+i+"</p>"}),e&&(t=t.replace(/<wp-line-break>/g,"\n")),i&&(t=t.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),t}function w(e){var i={o:k,data:e,unfiltered:e};return t&&t("body").trigger("beforePreWpautop",[i]),i.data=v(i.data),t&&t("body").trigger("afterPreWpautop",[i]),i.data}function b(e){var i={o:k,data:e,unfiltered:e};return t&&t("body").trigger("beforeWpautop",[i]),i.data=y(i.data),t&&t("body").trigger("afterWpautop",[i]),i.data}var x,A,k={};return t(document).on("tinymce-editor-init.keep-scroll-position",function(t,e){e.$(".mce_SELRES_start").length&&u(e)}),t?t(document).ready(i):document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):window.attachEvent&&(window.attachEvent("onload",i),document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()})),e.editor.autop=b,e.editor.removep=w,k={go:r,wpautop:b,pre_wpautop:w,_wp_Autop:y,_wp_Nop:v}}e.editor=e.editor||{},window.switchEditors=new i,e.editor.initialize=function(i,s){var r,n;if(t&&i&&e.editor.getDefaultSettings){if(n=e.editor.getDefaultSettings(),s||(s={tinymce:!0}),s.tinymce&&s.quicktags){var a=t("#"+i),o=t("<div>").attr({"class":"wp-core-ui wp-editor-wrap tmce-active",id:"wp-"+i+"-wrap"}),h=t('<div class="wp-editor-container">'),d=t("<button>").attr({type:"button","data-wp-editor-id":i}),c=t('<div class="wp-editor-tools">');if(s.mediaButtons){var l="Add Media";window._wpMediaViewsL10n&&window._wpMediaViewsL10n.addMedia&&(l=window._wpMediaViewsL10n.addMedia);var u=t('<button type="button" class="button insert-media add_media">');u.append('<span class="wp-media-buttons-icon"></span>'),u.append(document.createTextNode(" "+l)),u.data("editor",i),c.append(t('<div class="wp-media-buttons">').append(u))}o.append(c.append(t('<div class="wp-editor-tabs">').append(d.clone().attr({id:i+"-tmce","class":"wp-switch-editor switch-tmce"}).text(window.tinymce.translate("Visual"))).append(d.attr({id:i+"-html","class":"wp-switch-editor switch-html"}).text(window.tinymce.translate("Text")))).append(h)),a.after(o),h.append(a)}window.tinymce&&s.tinymce&&("object"!=typeof s.tinymce&&(s.tinymce={}),r=t.extend({},n.tinymce,s.tinymce),r.selector="#"+i,t(document).trigger("wp-before-tinymce-init",r),window.tinymce.init(r),window.wpActiveEditor||(window.wpActiveEditor=i)),window.quicktags&&s.quicktags&&("object"!=typeof s.quicktags&&(s.quicktags={}),r=t.extend({},n.quicktags,s.quicktags),r.id=i,t(document).trigger("wp-before-quicktags-init",r),window.quicktags(r),window.wpActiveEditor||(window.wpActiveEditor=r.id))}},e.editor.remove=function(e){var i,s,r=t("#wp-"+e+"-wrap");window.tinymce&&(i=window.tinymce.get(e))&&(i.isHidden()||i.save(),i.remove()),window.quicktags&&(s=window.QTags.getInstance(e))&&s.remove(),r.length&&(r.after(t("#"+e)),r.remove())},e.editor.getContent=function(e){var i;if(t&&e)return window.tinymce&&(i=window.tinymce.get(e))&&!i.isHidden()&&i.save(),t("#"+e).val()}}(window.jQuery,window.wp);