!function(t){"use strict";var e,i,s;s=wp.media.view.MediaFrame.AudioDetails.extend({createStates:function(){this.states.add([new wp.media.controller.AudioDetails({media:this.media}),new wp.media.controller.MediaLibrary({type:"audio",id:"add-audio-source",title:wp.media.view.l10n.audioAddSourceTitle,toolbar:"add-audio-source",media:this.media,menu:!1})])}}),e=t.MediaWidgetModel.extend({}),i=t.MediaWidgetControl.extend({showDisplaySettings:!1,mapModelToMediaFrameProps:function(e){var i,s=this;return i=t.MediaWidgetControl.prototype.mapModelToMediaFrameProps.call(s,e),i.link="embed",i},renderPreview:function(){var t,e,i,s,r=this;i=r.model.get("attachment_id"),s=r.model.get("url"),(i||s)&&(t=r.$el.find(".media-widget-preview"),e=wp.template("wp-media-widget-audio-preview"),t.html(e({model:{attachment_id:r.model.get("attachment_id"),src:s},error:r.model.get("error")})),wp.mediaelement.initialize())},editMedia:function(){var t,e,i,r=this;e=r.mapModelToMediaFrameProps(r.model.toJSON()),t=new s({frame:"audio",state:"audio-details",metadata:e}),wp.media.frame=t,t.$el.addClass("media-widget"),i=function(t){r.selectedAttachment.set(t),r.model.set(_.extend(r.model.defaults(),r.mapMediaToModelProps(t),{error:!1}))},t.state("audio-details").on("update",i),t.state("replace-audio").on("replace",i),t.on("close",function(){t.detach()}),t.open()}}),t.controlConstructors.media_audio=i,t.modelConstructors.media_audio=e}(wp.mediaWidgets);