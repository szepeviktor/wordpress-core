window.wp=window.wp||{},jQuery(document).ready(function(t){function e(){if(!(document.documentMode&&document.documentMode<9)){t("body").append('<div class="quick-draft-textarea-clone" style="display: none;"></div>');var e=t(".quick-draft-textarea-clone"),i=t("#content"),s=i.height(),r=t(window).height()-100;e.css({"font-family":i.css("font-family"),"font-size":i.css("font-size"),"line-height":i.css("line-height"),"padding-bottom":i.css("paddingBottom"),"padding-left":i.css("paddingLeft"),"padding-right":i.css("paddingRight"),"padding-top":i.css("paddingTop"),"white-space":"pre-wrap","word-wrap":"break-word",display:"none"}),i.on("focus input propertychange",function(){var n=t(this),a=n.val()+"&nbsp;",o=e.css("width",n.css("width")).text(a).outerHeight()+2;i.css("overflow-y","auto"),o===s||o>=r&&s>=r||(s=o>r?r:o,i.css("overflow","hidden"),n.css("height",s+"px"))})}}var i,s=t("#welcome-panel"),r=t("#wp_welcome_panel-hide");i=function(e){t.post(ajaxurl,{action:"update-welcome-panel",visible:e,welcomepanelnonce:t("#welcomepanelnonce").val()})},s.hasClass("hidden")&&r.prop("checked")&&s.removeClass("hidden"),t(".welcome-panel-close, .welcome-panel-dismiss a",s).click(function(e){e.preventDefault(),s.addClass("hidden"),i(0),t("#wp_welcome_panel-hide").prop("checked",!1)}),r.click(function(){s.toggleClass("hidden",!this.checked),i(this.checked?1:0)}),window.ajaxWidgets=["dashboard_primary"],window.ajaxPopulateWidgets=function(e){function i(e,i){var s,r=t("#"+i+" div.inside:visible").find(".widget-loading");r.length&&(s=r.parent(),setTimeout(function(){s.load(ajaxurl+"?action=dashboard-widgets&widget="+i+"&pagenow="+pagenow,"",function(){s.hide().slideDown("normal",function(){t(this).css("display","")})})},500*e))}e?(e=e.toString(),-1!==t.inArray(e,ajaxWidgets)&&i(0,e)):t.each(ajaxWidgets,i)},ajaxPopulateWidgets(),postboxes.add_postbox_toggles(pagenow,{pbshow:ajaxPopulateWidgets}),window.quickPressLoad=function(){var i,s=t("#quickpost-action");t('#quick-press .submit input[type="submit"], #quick-press .submit input[type="reset"]').prop("disabled",!1),i=t("#quick-press").submit(function(e){function s(){var e=t(".drafts ul li").first();e.css("background","#fffbe5"),setTimeout(function(){e.css("background","none")},1e3)}e.preventDefault(),t("#dashboard_quick_press #publishing-action .spinner").show(),t('#quick-press .submit input[type="submit"], #quick-press .submit input[type="reset"]').prop("disabled",!0),t.post(i.attr("action"),i.serializeArray(),function(e){t("#dashboard_quick_press .inside").html(e),t("#quick-press").removeClass("initial-form"),quickPressLoad(),s(),t("#title").focus()})}),t("#publish").click(function(){s.val("post-quickpress-publish")}),t("#title, #tags-input, #content").each(function(){var e=t(this),i=t("#"+this.id+"-prompt-text");""===this.value&&i.removeClass("screen-reader-text"),i.click(function(){t(this).addClass("screen-reader-text"),e.focus()}),e.blur(function(){""===this.value&&i.removeClass("screen-reader-text")}),e.focus(function(){i.addClass("screen-reader-text")})}),t("#quick-press").on("click focusin",function(){wpActiveEditor="content"}),e()},window.quickPressLoad(),t(".meta-box-sortables").sortable("option","containment","#wpwrap")}),jQuery(function(t){"use strict";var e,i=window.communityEventsData||{};e=window.wp.communityEvents={initialized:!1,model:null,init:function(){if(!e.initialized){var s=t("#community-events");t(".community-events-errors").attr("aria-hidden","true").removeClass("hide-if-js"),s.on("click",".community-events-toggle-location, .community-events-cancel",e.toggleLocationForm),s.on("submit",".community-events-form",function(i){var s=t.trim(t("#community-events-location").val());i.preventDefault(),s&&e.getEvents({location:s})}),i&&i.cache&&i.cache.location&&i.cache.events?e.renderEventsTemplate(i.cache,"app"):e.getEvents(),e.initialized=!0}},toggleLocationForm:function(e){var i=t(".community-events-toggle-location"),s=t(".community-events-cancel"),r=t(".community-events-form"),n=t();"object"==typeof e&&(n=t(e.target),e="true"==i.attr("aria-expanded")?"hide":"show"),"hide"===e?(i.attr("aria-expanded","false"),s.attr("aria-expanded","false"),r.attr("aria-hidden","true"),n.hasClass("community-events-cancel")&&i.focus()):(i.attr("aria-expanded","true"),s.attr("aria-expanded","true"),r.attr("aria-hidden","false"))},getEvents:function(e){var s,r=this,n=t(".community-events-form").children(".spinner");e=e||{},e._wpnonce=i.nonce,e.timezone=window.Intl?window.Intl.DateTimeFormat().resolvedOptions().timeZone:"",s=e.location?"user":"app",n.addClass("is-active"),wp.ajax.post("get-community-events",e).always(function(){n.removeClass("is-active")}).done(function(t){"no_location_available"===t.error&&(e.location?t.unknownCity=e.location:delete t.error),r.renderEventsTemplate(t,s)}).fail(function(){r.renderEventsTemplate({location:!1,error:!0},s)})},renderEventsTemplate:function(s,r){var n,a,o=/%(?:\d\$)?s/g,h=t(".community-events-toggle-location"),d=t("#community-events-location-message"),c=t(".community-events-results");a={".community-events":!0,".community-events-loading":!1,".community-events-errors":!1,".community-events-error-occurred":!1,".community-events-could-not-locate":!1,"#community-events-location-message":!1,".community-events-toggle-location":!1,".community-events-results":!1},s.location.ip?(d.text(i.l10n.attend_event_near_generic),s.events.length?(n=wp.template("community-events-event-list"),c.html(n(s))):(n=wp.template("community-events-no-upcoming-events"),c.html(n(s))),a["#community-events-location-message"]=!0,a[".community-events-toggle-location"]=!0,a[".community-events-results"]=!0):s.location.description?(n=wp.template("community-events-attend-event-near"),d.html(n(s)),s.events.length?(n=wp.template("community-events-event-list"),c.html(n(s))):(n=wp.template("community-events-no-upcoming-events"),c.html(n(s))),"user"===r&&wp.a11y.speak(i.l10n.city_updated.replace(o,s.location.description),"assertive"),a["#community-events-location-message"]=!0,a[".community-events-toggle-location"]=!0,a[".community-events-results"]=!0):s.unknownCity?(n=wp.template("community-events-could-not-locate"),t(".community-events-could-not-locate").html(n(s)),wp.a11y.speak(i.l10n.could_not_locate_city.replace(o,s.unknownCity)),a[".community-events-errors"]=!0,a[".community-events-could-not-locate"]=!0):s.error&&"user"===r?(wp.a11y.speak(i.l10n.error_occurred_please_try_again),a[".community-events-errors"]=!0,a[".community-events-error-occurred"]=!0):(d.text(i.l10n.enter_closest_city),a["#community-events-location-message"]=!0,a[".community-events-toggle-location"]=!0),_.each(a,function(e,i){t(i).attr("aria-hidden",!e)}),h.attr("aria-expanded",a[".community-events-toggle-location"]),s.location&&(s.location.ip||s.location.latitude)?(e.toggleLocationForm("hide"),"user"===r&&h.focus()):e.toggleLocationForm("show")}},t("#dashboard_primary").is(":visible")?e.init():t(document).on("postbox-toggled",function(i,s){var r=t(s);"dashboard_primary"===r.attr("id")&&r.is(":visible")&&e.init()})});