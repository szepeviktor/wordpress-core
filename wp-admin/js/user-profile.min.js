!function(t){function e(){if("function"!=typeof zxcvbn)return void setTimeout(e,50);c.val()?(a(),o()):(c.val(c.data("pw")),c.trigger("pwupdate"),o()),1!==parseInt(f.data("start-masked"),10)?d.addClass("show-password"):f.trigger("click"),t("#pw-weak-text-label").html(userProfileL10n.warnWeak)}function i(){w=c.val(),d=c.parent(),l=t('<input type="text"/>').attr({id:"pass1-text",name:"pass1-text",autocomplete:"off"}).addClass(c[0].className).data("pw",c.data("pw")).val(c.val()).on(b,function(){l.val()!==w&&(p.val(l.val()),c.val(l.val()).trigger("pwupdate"),w=l.val())}),c.after(l),1===parseInt(c.data("reveal"),10)&&e(),c.on(b+" pwupdate",function(){c.val()!==w&&(w=c.val(),l.val()!==w&&l.val(w),c.add(l).removeClass("short bad good strong"),o())})}function s(){f.data("toggle",0).attr({"aria-label":userProfileL10n.ariaHide}).find(".text").text(userProfileL10n.hide).end().find(".dashicons").removeClass("dashicons-visibility").addClass("dashicons-hidden"),l.focus(),u.attr("for","pass1-text")}function r(){f=h.find(".wp-hide-pw"),f.show().on("click",function(){1===parseInt(f.data("toggle"),10)?(d.addClass("show-password"),s(),_.isUndefined(l[0].setSelectionRange)||l[0].setSelectionRange(0,100)):(d.removeClass("show-password"),f.data("toggle",1).attr({"aria-label":userProfileL10n.ariaShow}).find(".text").text(userProfileL10n.show).end().find(".dashicons").removeClass("dashicons-hidden").addClass("dashicons-visibility"),c.focus(),u.attr("for","pass1"),_.isUndefined(c[0].setSelectionRange)||c[0].setSelectionRange(0,100))})}function n(){var n,a,o;h=t(".user-pass1-wrap"),u=h.find("th label").attr("for","pass1-text"),t(".user-pass2-wrap").hide(),y=t("#submit, #wp-submit").on("click",function(){x=!1}),v=y.add(" #createusersub"),m=t(".pw-weak"),g=m.find(".pw-checkbox"),g.change(function(){v.prop("disabled",!g.prop("checked"))}),c=t("#pass1"),c.length&&i(),p=t("#pass2").on(b,function(){p.val().length>0&&(c.val(p.val()),p.val(""),w="",c.trigger("pwupdate"))}),c.is(":hidden")&&(c.prop("disabled",!0),p.prop("disabled",!0),l.prop("disabled",!0)),n=h.find(".wp-pwd"),a=h.find("button.wp-generate-pw"),r(),a.length&&n.hide(),a.show(),a.on("click",function(){x=!0,a.hide(),n.show(),c.attr("disabled",!1),p.attr("disabled",!1),l.attr("disabled",!1),0===l.val().length&&e(),_.defer(function(){l.focus(),_.isUndefined(l[0].setSelectionRange)||l[0].setSelectionRange(0,100)},0)}),o=h.find("button.wp-cancel-pw"),o.on("click",function(){x=!1,l.val(""),wp.ajax.post("generate-password").done(function(t){c.data("pw",t)}),a.show(),n.hide(),m.hide(0,function(){g.removeProp("checked")}),c.prop("disabled",!0),p.prop("disabled",!0),l.prop("disabled",!0),s(),h.closest("form").is("#your-profile")&&(c.val("").trigger("pwupdate"),v.prop("disabled",!1))}),h.closest("form").on("submit",function(){x=!1,c.prop("disabled",!1),p.prop("disabled",!1),p.val(c.val()),d.removeClass("show-password")})}function a(){var e=t("#pass1").val();if(t("#pass-strength-result").removeClass("short bad good strong"),!e)return void t("#pass-strength-result").html("&nbsp;");switch(wp.passwordStrength.meter(e,wp.passwordStrength.userInputBlacklist(),e)){case-1:t("#pass-strength-result").addClass("bad").html(pwsL10n.unknown);break;case 2:t("#pass-strength-result").addClass("bad").html(pwsL10n.bad);break;case 3:t("#pass-strength-result").addClass("good").html(pwsL10n.good);break;case 4:t("#pass-strength-result").addClass("strong").html(pwsL10n.strong);break;case 5:t("#pass-strength-result").addClass("short").html(pwsL10n.mismatch);break;default:t("#pass-strength-result").addClass("short").html(pwsL10n["short"])}}function o(){var e=t("#pass-strength-result")[0];e.className&&(c.add(l).addClass(e.className),t(e).is(".short, .bad")?(g.prop("checked")||v.prop("disabled",!0),m.show()):(v.prop("disabled",!1),m.hide()))}var h,d,c,l,u,p,m,g,f,v,y,w,b,x=!1;b="oninput"in document.createElement("input")?"input":"keyup",t(document).ready(function(){var e,i,s,r,o=t("#display_name"),h=o.val(),d=t("#wp-admin-bar-my-account").find(".display-name");t("#pass1").val("").on(b+" pwupdate",a),t("#pass-strength-result").show(),t(".color-palette").click(function(){t(this).siblings('input[name="admin_color"]').prop("checked",!0)}),o.length&&(t("#first_name, #last_name, #nickname").bind("blur.user_profile",function(){var e=[],i={display_nickname:t("#nickname").val()||"",display_username:t("#user_login").val()||"",display_firstname:t("#first_name").val()||"",display_lastname:t("#last_name").val()||""};i.display_firstname&&i.display_lastname&&(i.display_firstlast=i.display_firstname+" "+i.display_lastname,i.display_lastfirst=i.display_lastname+" "+i.display_firstname),t.each(t("option",o),function(t,i){e.push(i.value)}),t.each(i,function(s,r){if(r){var n=r.replace(/<\/?[a-z][^>]*>/gi,"");i[s].length&&-1===t.inArray(n,e)&&(e.push(n),t("<option />",{text:n}).appendTo(o))}})}),o.on("change",function(){if(s===r){var e=t.trim(this.value)||h;d.text(e)}})),e=t("#color-picker"),i=t("#colors-css"),s=t("input#user_id").val(),r=t('input[name="checkuser_id"]').val(),e.on("click.colorpicker",".color-option",function(){var e,n=t(this);if(!n.hasClass("selected")&&(n.siblings(".selected").removeClass("selected"),n.addClass("selected").find('input[type="radio"]').prop("checked",!0),s===r)){if(0===i.length&&(i=t('<link rel="stylesheet" />').appendTo("head")),i.attr("href",n.children(".css_url").val()),"undefined"!=typeof wp&&wp.svgPainter){try{e=t.parseJSON(n.children(".icon_colors").val())}catch(a){}e&&(wp.svgPainter.setColors(e),wp.svgPainter.paint())}t.post(ajaxurl,{action:"save-user-color-scheme",color_scheme:n.children('input[name="admin_color"]').val(),nonce:t("#color-nonce").val()}).done(function(e){e.success&&t("body").removeClass(e.data.previousScheme).addClass(e.data.currentScheme)})}}),n()}),t("#destroy-sessions").on("click",function(e){var i=t(this);wp.ajax.post("destroy-sessions",{nonce:t("#_wpnonce").val(),user_id:t("#user_id").val()}).done(function(t){i.prop("disabled",!0),i.siblings(".notice").remove(),i.before('<div class="notice notice-success inline"><p>'+t.message+"</p></div>")}).fail(function(t){i.siblings(".notice").remove(),i.before('<div class="notice notice-error inline"><p>'+t.message+"</p></div>")}),e.preventDefault()}),window.generatePassword=e,t(window).on("beforeunload",function(){if(!0===x)return userProfileL10n.warn})}(jQuery);